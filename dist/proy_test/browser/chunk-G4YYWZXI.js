import{a as we}from"./chunk-KGSDQIIO.js";import{b as U,c as b,d as B,e as Y,h as K,k as Q,l as J,m as W,n as X,o as Z,r as ee,t as te}from"./chunk-C56EV6ZL.js";import{a as Me}from"./chunk-CUCLTFGI.js";import{a as ke}from"./chunk-IYW2DV6Z.js";import{$a as Pe,A as z,Aa as a,Ba as A,Ca as C,Da as se,G as y,H as P,I as f,J as h,Ja as T,Na as q,P as I,Q as k,V as ve,Wa as S,Z as l,a as G,aa as he,ca as g,d as ue,db as F,ea as p,g as pe,ga as _,h as x,ha as Ce,hb as de,ia as M,ib as Se,k as E,ka as _e,ma as c,p as ge,pa as V,qa as R,ra as i,s as j,sa as n,ta as d,ua as D,v as fe,va as v,wa as u,wb as H,xa as xe,y as be,ya as Ee,z as w,za as ye}from"./chunk-7RPVYQIG.js";import{a as $,b as me,e as L}from"./chunk-6MDQTQU3.js";function ze(r,t){r&1&&a(0," El nombre es requerido ")}function De(r,t){r&1&&a(0," El nombre debe tener al menos 2 caracteres ")}function Te(r,t){if(r&1&&(i(0,"p",8),p(1,ze,1,0)(2,De,1,0),n()),r&2){let e=u();l(),c(!(e.nombre==null||e.nombre.errors==null)&&e.nombre.errors.required?1:-1),l(),c(!(e.nombre==null||e.nombre.errors==null)&&e.nombre.errors.minlength?2:-1)}}function Fe(r,t){r&1&&a(0," Los apellidos son requeridos ")}function Ae(r,t){r&1&&a(0," Los apellidos deben tener al menos 2 caracteres ")}function je(r,t){if(r&1&&(i(0,"p",8),p(1,Fe,1,0)(2,Ae,1,0),n()),r&2){let e=u();l(),c(!(e.apellidos==null||e.apellidos.errors==null)&&e.apellidos.errors.required?1:-1),l(),c(!(e.apellidos==null||e.apellidos.errors==null)&&e.apellidos.errors.minlength?2:-1)}}function Ve(r,t){r&1&&a(0," El email es requerido ")}function Re(r,t){r&1&&a(0," Ingresa un email v\xE1lido ")}function Ne(r,t){if(r&1&&(i(0,"p",8),p(1,Ve,1,0)(2,Re,1,0),n()),r&2){let e=u();l(),c(!(e.email==null||e.email.errors==null)&&e.email.errors.required?1:-1),l(),c(!(e.email==null||e.email.errors==null)&&e.email.errors.email?2:-1)}}function $e(r,t){r&1&&a(0," El tel\xE9fono es requerido ")}function Le(r,t){r&1&&a(0," Ingresa un tel\xE9fono v\xE1lido de 9 d\xEDgitos ")}function Ge(r,t){if(r&1&&(i(0,"p",8),p(1,$e,1,0)(2,Le,1,0),n()),r&2){let e=u();l(),c(!(e.telefono==null||e.telefono.errors==null)&&e.telefono.errors.required?1:-1),l(),c(!(e.telefono==null||e.telefono.errors==null)&&e.telefono.errors.pattern?2:-1)}}function qe(r,t){r&1&&a(0," El n\xFAmero de documento es requerido ")}function He(r,t){r&1&&a(0," El documento debe tener al menos 8 caracteres ")}function Ue(r,t){if(r&1&&(i(0,"p",8),p(1,qe,1,0)(2,He,1,0),n()),r&2){let e=u();l(),c(!(e.documentoNumero==null||e.documentoNumero.errors==null)&&e.documentoNumero.errors.required?1:-1),l(),c(!(e.documentoNumero==null||e.documentoNumero.errors==null)&&e.documentoNumero.errors.minlength?2:-1)}}function Be(r,t){r&1&&d(0,"div",19)}var oe=class r{authService=w(Me);fb=w(ee);datosPersonales=g(null);cargando=g(!1);datosActualizados=I();siguiente=I();datosForm;formularioValido=g(!1);constructor(){this.datosForm=this.fb.group({nombre:["",[b.required,b.minLength(2)]],apellidos:["",[b.required,b.minLength(2)]],email:["",[b.required,b.email]],telefono:["",[b.required,b.pattern(/^[0-9]{9}$/)]],documento_tipo:["DNI",b.required],documento_numero:["",[b.required,b.minLength(8)]]})}ngOnInit(){this.cargarDatosUsuario(),this.configurarSuscripciones(),this.formularioValido.set(this.datosForm.valid)}cargarDatosUsuario(){let t=this.authService.currentUser();if(t){let e={nombre:t.name||"",apellidos:"",email:t.email||"",telefono:"",documento_tipo:"DNI",documento_numero:""};this.datosForm.patchValue(e),this.datosPersonales.set(e),this.emitirDatos()}}configurarSuscripciones(){this.datosForm.valueChanges.subscribe(t=>{if(this.formularioValido.set(this.datosForm.valid),this.datosForm.valid){let e={nombre:t.nombre,apellidos:t.apellidos,email:t.email,telefono:t.telefono,documento_tipo:t.documento_tipo,documento_numero:t.documento_numero};this.datosPersonales.set(e),this.emitirDatos()}}),this.datosForm.statusChanges.subscribe(()=>{this.formularioValido.set(this.datosForm.valid)})}emitirDatos(){this.datosPersonales()&&this.datosActualizados.emit(this.datosPersonales())}onSiguiente(){this.formularioValido()&&this.siguiente.emit()}get nombre(){return this.datosForm.get("nombre")}get apellidos(){return this.datosForm.get("apellidos")}get email(){return this.datosForm.get("email")}get telefono(){return this.datosForm.get("telefono")}get documentoTipo(){return this.datosForm.get("documento_tipo")}get documentoNumero(){return this.datosForm.get("documento_numero")}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=z({type:r,selectors:[["app-datos-cliente"]],outputs:{datosActualizados:"datosActualizados",siguiente:"siguiente"},standalone:!0,features:[T],decls:50,vars:28,consts:[[1,"p-6","border-b","border-gray-200"],[1,"text-xl","font-semibold","text-gray-900","mb-4","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","mr-2","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"space-y-4",3,"formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","formControlName","nombre","placeholder","Ingresa tus nombres",1,"w-full","px-3","py-2","border","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-colors"],[1,"mt-1","text-sm","text-red-600"],["type","text","formControlName","apellidos","placeholder","Ingresa tus apellidos",1,"w-full","px-3","py-2","border","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-colors"],["type","email","formControlName","email","placeholder","correo@ejemplo.com",1,"w-full","px-3","py-2","border","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-colors"],["type","tel","formControlName","telefono","placeholder","999999999",1,"w-full","px-3","py-2","border","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-colors"],["formControlName","documento_tipo",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-colors"],["value","DNI"],["value","CE"],["value","Pasaporte"],["type","text","formControlName","documento_numero","placeholder","12345678",1,"w-full","px-3","py-2","border","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-colors"],[1,"mt-6","flex","justify-end"],[1,"px-6","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors","flex","items-center","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"animate-spin","rounded-full","h-4","w-4","border-b-2","border-white","mr-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","ml-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"h2",1),f(),i(2,"svg",2),d(3,"path",3),n(),a(4," Datos del Cliente "),n(),h(),i(5,"form",4)(6,"div",5)(7,"div")(8,"label",6),a(9," Nombres * "),n(),d(10,"input",7),p(11,Te,3,2,"p",8),n(),i(12,"div")(13,"label",6),a(14," Apellidos * "),n(),d(15,"input",9),p(16,je,3,2,"p",8),n()(),i(17,"div",5)(18,"div")(19,"label",6),a(20," Email * "),n(),d(21,"input",10),p(22,Ne,3,2,"p",8),n(),i(23,"div")(24,"label",6),a(25," Tel\xE9fono * "),n(),d(26,"input",11),p(27,Ge,3,2,"p",8),n()(),i(28,"div",5)(29,"div")(30,"label",6),a(31," Tipo de Documento * "),n(),i(32,"select",12)(33,"option",13),a(34,"DNI"),n(),i(35,"option",14),a(36,"Carnet de Extranjer\xEDa"),n(),i(37,"option",15),a(38,"Pasaporte"),n()()(),i(39,"div")(40,"label",6),a(41," N\xFAmero de Documento * "),n(),d(42,"input",16),p(43,Ue,3,2,"p",8),n()()(),i(44,"div",17)(45,"button",18),v("click",function(){return o.onSiguiente()}),p(46,Be,1,0,"div",19),a(47," Continuar "),f(),i(48,"svg",20),d(49,"path",21),n()()()()),e&2&&(l(5),_("formGroup",o.datosForm),l(5),M("border-red-300",(o.nombre==null?null:o.nombre.invalid)&&(o.nombre==null?null:o.nombre.touched))("border-gray-300",!(o.nombre!=null&&o.nombre.invalid)||!(o.nombre!=null&&o.nombre.touched)),l(),c(o.nombre!=null&&o.nombre.invalid&&(o.nombre!=null&&o.nombre.touched)?11:-1),l(4),M("border-red-300",(o.apellidos==null?null:o.apellidos.invalid)&&(o.apellidos==null?null:o.apellidos.touched))("border-gray-300",!(o.apellidos!=null&&o.apellidos.invalid)||!(o.apellidos!=null&&o.apellidos.touched)),l(),c(o.apellidos!=null&&o.apellidos.invalid&&(o.apellidos!=null&&o.apellidos.touched)?16:-1),l(5),M("border-red-300",(o.email==null?null:o.email.invalid)&&(o.email==null?null:o.email.touched))("border-gray-300",!(o.email!=null&&o.email.invalid)||!(o.email!=null&&o.email.touched)),l(),c(o.email!=null&&o.email.invalid&&(o.email!=null&&o.email.touched)?22:-1),l(4),M("border-red-300",(o.telefono==null?null:o.telefono.invalid)&&(o.telefono==null?null:o.telefono.touched))("border-gray-300",!(o.telefono!=null&&o.telefono.invalid)||!(o.telefono!=null&&o.telefono.touched)),l(),c(o.telefono!=null&&o.telefono.invalid&&(o.telefono!=null&&o.telefono.touched)?27:-1),l(15),M("border-red-300",(o.documentoNumero==null?null:o.documentoNumero.invalid)&&(o.documentoNumero==null?null:o.documentoNumero.touched))("border-gray-300",!(o.documentoNumero!=null&&o.documentoNumero.invalid)||!(o.documentoNumero!=null&&o.documentoNumero.touched)),l(),c(o.documentoNumero!=null&&o.documentoNumero.invalid&&(o.documentoNumero!=null&&o.documentoNumero.touched)?43:-1),l(2),_("disabled",!o.formularioValido()||o.cargando()),l(),c(o.cargando()?46:-1))},dependencies:[F,te,K,X,Z,U,W,B,Y,Q,J],styles:[".form-container[_ngcontent-%COMP%]{transition:all .3s ease}.form-input[_ngcontent-%COMP%]{transition:all .2s ease}.form-input[_ngcontent-%COMP%]:focus{transform:translateY(-1px);box-shadow:0 4px 12px #3b82f626}.form-label[_ngcontent-%COMP%]{font-weight:500;color:#374151}.form-grid[_ngcontent-%COMP%]{gap:1rem}@media (min-width: 768px){.form-grid[_ngcontent-%COMP%]{gap:1.5rem}}.form-input.invalid[_ngcontent-%COMP%]{border-color:#ef4444;box-shadow:0 0 0 3px #ef44441a}.form-input.valid[_ngcontent-%COMP%]{border-color:#10b981;box-shadow:0 0 0 3px #10b9811a}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-in}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}"]})};var Ye=(r,t)=>t.id;function Ke(r,t){r&1&&a(0," El nombre del contacto es requerido ")}function Qe(r,t){r&1&&a(0," El nombre debe tener al menos 2 caracteres ")}function Je(r,t){if(r&1&&(i(0,"p",8),p(1,Ke,1,0)(2,Qe,1,0),n()),r&2){let e=u();l(),c(!(e.nombreContacto==null||e.nombreContacto.errors==null)&&e.nombreContacto.errors.required?1:-1),l(),c(!(e.nombreContacto==null||e.nombreContacto.errors==null)&&e.nombreContacto.errors.minlength?2:-1)}}function We(r,t){r&1&&a(0," El tel\xE9fono de contacto es requerido ")}function Xe(r,t){r&1&&a(0," Ingresa un tel\xE9fono v\xE1lido de 9 d\xEDgitos ")}function Ze(r,t){if(r&1&&(i(0,"p",8),p(1,We,1,0)(2,Xe,1,0),n()),r&2){let e=u();l(),c(!(e.telefonoContacto==null||e.telefonoContacto.errors==null)&&e.telefonoContacto.errors.required?1:-1),l(),c(!(e.telefonoContacto==null||e.telefonoContacto.errors==null)&&e.telefonoContacto.errors.pattern?2:-1)}}function et(r,t){r&1&&a(0," La direcci\xF3n es requerida ")}function tt(r,t){r&1&&a(0," La direcci\xF3n debe tener al menos 10 caracteres ")}function ot(r,t){if(r&1&&(i(0,"p",8),p(1,et,1,0)(2,tt,1,0),n()),r&2){let e=u();l(),c(!(e.direccion==null||e.direccion.errors==null)&&e.direccion.errors.required?1:-1),l(),c(!(e.direccion==null||e.direccion.errors==null)&&e.direccion.errors.minlength?2:-1)}}function nt(r,t){if(r&1){let e=D();i(0,"label",34)(1,"input",35),v("change",function(){let s=y(e).$implicit,m=u();return P(m.seleccionarMetodoEnvio(s.id))}),n(),i(2,"div",36)(3,"div",37)(4,"span",38),a(5),n(),i(6,"span",39),a(7),n()(),i(8,"p",40),a(9),n()()()}if(r&2){let e,o,s,m=t.$implicit,O=u();M("border-blue-500",((e=O.metodoEnvio())==null?null:e.id)===m.id)("bg-blue-50",((o=O.metodoEnvio())==null?null:o.id)===m.id),l(),_("value",m.id)("checked",((s=O.metodoEnvio())==null?null:s.id)===m.id),l(4),A(m.nombre),l(2),C("S/ ",m.precio,".00"),l(2),C(" ",m.descripcion," ")}}function it(r,t){r&1&&d(0,"div",31)}var ie=class r{fb=w(ee);datosPersonales=k(null);direccionEnvio=g(null);metodoEnvio=g(null);cargando=g(!1);direccionActualizada=I();metodoEnvioSeleccionado=I();anterior=I();siguiente=I();direccionForm;metodosEnvio=[{id:1,nombre:"Env\xEDo Regular",descripcion:"Entrega de 3 a 5 d\xEDas h\xE1biles",precio:10,tiempo_entrega:"3-5 d\xEDas",activo:!0},{id:2,nombre:"Env\xEDo Express",descripcion:"Entrega en 24 horas",precio:20,tiempo_entrega:"24 horas",activo:!0}];formularioValido=g(!1);constructor(){this.direccionForm=this.fb.group({nombre_contacto:["",[b.required,b.minLength(2)]],telefono_contacto:["",[b.required,b.pattern(/^[0-9]{9}$/)]],direccion:["",[b.required,b.minLength(10)]],referencia:[""],departamento:["Lima",b.required],provincia:["Lima",b.required],distrito:["Miraflores",b.required]})}ngOnInit(){this.configurarSuscripciones(),this.precargarDatos(),this.actualizarValidacionFormulario()}precargarDatos(){let t=this.datosPersonales();t&&this.direccionForm.patchValue({nombre_contacto:`${t.nombre} ${t.apellidos}`,telefono_contacto:t.telefono})}configurarSuscripciones(){this.direccionForm.valueChanges.subscribe(t=>{if(this.actualizarValidacionFormulario(),this.direccionForm.valid){let e={nombre_contacto:t.nombre_contacto,telefono_contacto:t.telefono_contacto,direccion:t.direccion,referencia:t.referencia,departamento:t.departamento,provincia:t.provincia,distrito:t.distrito};this.direccionEnvio.set(e),this.direccionActualizada.emit(e)}}),this.direccionForm.statusChanges.subscribe(()=>{this.actualizarValidacionFormulario()})}actualizarValidacionFormulario(){let t=this.direccionForm.valid,e=this.metodoEnvio()!==null;this.formularioValido.set(t&&e)}seleccionarMetodoEnvio(t){let e=this.metodosEnvio.find(o=>o.id===t);if(e){let o={id:e.id,nombre:e.nombre,descripcion:e.descripcion,precio:e.precio,tiempo_entrega:e.tiempo_entrega,activo:e.activo};this.metodoEnvio.set(o),this.metodoEnvioSeleccionado.emit(o),this.actualizarValidacionFormulario()}}onAnterior(){this.anterior.emit()}onSiguiente(){this.formularioValido()&&this.siguiente.emit()}get nombreContacto(){return this.direccionForm.get("nombre_contacto")}get telefonoContacto(){return this.direccionForm.get("telefono_contacto")}get direccion(){return this.direccionForm.get("direccion")}get referencia(){return this.direccionForm.get("referencia")}get departamento(){return this.direccionForm.get("departamento")}get provincia(){return this.direccionForm.get("provincia")}get distrito(){return this.direccionForm.get("distrito")}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=z({type:r,selectors:[["app-envio-resumen"]],inputs:{datosPersonales:[1,"datosPersonales"]},outputs:{direccionActualizada:"direccionActualizada",metodoEnvioSeleccionado:"metodoEnvioSeleccionado",anterior:"anterior",siguiente:"siguiente"},standalone:!0,features:[T],decls:69,vars:18,consts:[[1,"p-6","border-b","border-gray-200"],[1,"text-xl","font-semibold","text-gray-900","mb-4","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","mr-2","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"],[1,"space-y-4",3,"formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","formControlName","nombre_contacto","placeholder","Nombre de quien recibe",1,"w-full","px-3","py-2","border","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-colors"],[1,"mt-1","text-sm","text-red-600"],["type","tel","formControlName","telefono_contacto","placeholder","999999999",1,"w-full","px-3","py-2","border","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-colors"],["type","text","formControlName","direccion","placeholder","Av. Principal 123, Urbanizaci\xF3n",1,"w-full","px-3","py-2","border","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-colors"],["type","text","formControlName","referencia","placeholder","Cerca de... / Frente a...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-colors"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],["formControlName","departamento",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-colors"],["value","Lima"],["value","Arequipa"],["value","Trujillo"],["formControlName","provincia",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-colors"],["formControlName","distrito",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-colors"],["value","Miraflores"],["value","San Isidro"],["value","La Molina"],[1,"mt-6"],[1,"text-lg","font-medium","text-gray-900","mb-3"],[1,"space-y-3"],[1,"flex","items-center","p-4","border","rounded-lg","cursor-pointer","hover:bg-gray-50","transition-colors",3,"border-blue-500","bg-blue-50"],[1,"mt-6","flex","justify-between"],[1,"px-6","py-2","border","border-gray-300","text-gray-700","rounded-lg","hover:bg-gray-50","transition-colors","flex","items-center",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"px-6","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors","flex","items-center","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"animate-spin","rounded-full","h-4","w-4","border-b-2","border-white","mr-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","ml-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"flex","items-center","p-4","border","rounded-lg","cursor-pointer","hover:bg-gray-50","transition-colors"],["type","radio","name","metodoEnvio",1,"text-blue-600","focus:ring-blue-500",3,"change","value","checked"],[1,"ml-3","flex-1"],[1,"flex","justify-between"],[1,"font-medium"],[1,"font-bold","text-green-600"],[1,"text-sm","text-gray-600"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"h2",1),f(),i(2,"svg",2),d(3,"path",3),n(),a(4," Direcci\xF3n de Env\xEDo "),n(),h(),i(5,"form",4)(6,"div",5)(7,"div")(8,"label",6),a(9," Nombre del Contacto * "),n(),d(10,"input",7),p(11,Je,3,2,"p",8),n(),i(12,"div")(13,"label",6),a(14," Tel\xE9fono de Contacto * "),n(),d(15,"input",9),p(16,Ze,3,2,"p",8),n()(),i(17,"div")(18,"label",6),a(19," Direcci\xF3n Completa * "),n(),d(20,"input",10),p(21,ot,3,2,"p",8),n(),i(22,"div")(23,"label",6),a(24," Referencia "),n(),d(25,"input",11),n(),i(26,"div",12)(27,"div")(28,"label",6),a(29," Departamento * "),n(),i(30,"select",13)(31,"option",14),a(32,"Lima"),n(),i(33,"option",15),a(34,"Arequipa"),n(),i(35,"option",16),a(36,"Trujillo"),n()()(),i(37,"div")(38,"label",6),a(39," Provincia * "),n(),i(40,"select",17)(41,"option",14),a(42,"Lima"),n()()(),i(43,"div")(44,"label",6),a(45," Distrito * "),n(),i(46,"select",18)(47,"option",19),a(48,"Miraflores"),n(),i(49,"option",20),a(50,"San Isidro"),n(),i(51,"option",21),a(52,"La Molina"),n()()()()(),i(53,"div",22)(54,"h3",23),a(55,"M\xE9todo de Env\xEDo"),n(),i(56,"div",24),V(57,nt,10,9,"label",25,Ye),n()(),i(59,"div",26)(60,"button",27),v("click",function(){return o.onAnterior()}),f(),i(61,"svg",28),d(62,"path",29),n(),a(63," Anterior "),n(),h(),i(64,"button",30),v("click",function(){return o.onSiguiente()}),p(65,it,1,0,"div",31),a(66," Continuar "),f(),i(67,"svg",32),d(68,"path",33),n()()()()),e&2&&(l(5),_("formGroup",o.direccionForm),l(5),M("border-red-300",(o.nombreContacto==null?null:o.nombreContacto.invalid)&&(o.nombreContacto==null?null:o.nombreContacto.touched))("border-gray-300",!(o.nombreContacto!=null&&o.nombreContacto.invalid)||!(o.nombreContacto!=null&&o.nombreContacto.touched)),l(),c(o.nombreContacto!=null&&o.nombreContacto.invalid&&(o.nombreContacto!=null&&o.nombreContacto.touched)?11:-1),l(4),M("border-red-300",(o.telefonoContacto==null?null:o.telefonoContacto.invalid)&&(o.telefonoContacto==null?null:o.telefonoContacto.touched))("border-gray-300",!(o.telefonoContacto!=null&&o.telefonoContacto.invalid)||!(o.telefonoContacto!=null&&o.telefonoContacto.touched)),l(),c(o.telefonoContacto!=null&&o.telefonoContacto.invalid&&(o.telefonoContacto!=null&&o.telefonoContacto.touched)?16:-1),l(4),M("border-red-300",(o.direccion==null?null:o.direccion.invalid)&&(o.direccion==null?null:o.direccion.touched))("border-gray-300",!(o.direccion!=null&&o.direccion.invalid)||!(o.direccion!=null&&o.direccion.touched)),l(),c(o.direccion!=null&&o.direccion.invalid&&(o.direccion!=null&&o.direccion.touched)?21:-1),l(36),R(o.metodosEnvio),l(7),_("disabled",!o.formularioValido()||o.cargando()),l(),c(o.cargando()?65:-1))},dependencies:[F,te,K,X,Z,U,W,B,Y,Q,J],styles:[".shipping-option[_ngcontent-%COMP%]{transition:all .2s ease;cursor:pointer}.shipping-option[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.shipping-option.selected[_ngcontent-%COMP%]{border-color:#3b82f6;background-color:#eff6ff;box-shadow:0 0 0 3px #3b82f61a}.shipping-price[_ngcontent-%COMP%]{font-weight:600;color:#059669}.shipping-time[_ngcontent-%COMP%]{color:#6b7280;font-size:.875rem}.summary-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fafc,#e2e8f0);border-radius:12px;padding:1.5rem}.summary-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.5rem 0}.summary-total[_ngcontent-%COMP%]{border-top:2px solid #e5e7eb;padding-top:1rem;margin-top:1rem;font-weight:700;font-size:1.125rem}.slide-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideIn .3s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translate(-20px)}to{opacity:1;transform:translate(0)}}@media (max-width: 768px){.shipping-option[_ngcontent-%COMP%], .summary-section[_ngcontent-%COMP%]{padding:1rem}}"]})};var re=class r{constructor(t){this.http=t;this.estadoCheckoutSubject.subscribe(e=>{this.estadoCheckoutSignal.set(e)})}apiUrl=`${ke.apiUrl}/checkout`;estadoCheckoutSubject=new ue({paso_actual:1,items:[],en_proceso:!1});estadoCheckoutSignal=g({paso_actual:1,items:[],en_proceso:!1});estadoCheckout$=this.estadoCheckoutSubject.asObservable();estadoCheckout=this.estadoCheckoutSignal.asReadonly();pasoActual=S(()=>this.estadoCheckout().paso_actual);datosCompletos=S(()=>{let t=this.estadoCheckout();return!!(t.datos_personales&&t.direccion_envio&&t.metodo_pago)});totalItems=S(()=>this.estadoCheckout().items.length);totalMonto=S(()=>this.estadoCheckout().resumen?.total||0);configuracionCache$;obtenerMetodosPago(t){let e=new de;return t?.monto&&(e=e.set("monto",t.monto.toString())),t?.pais&&(e=e.set("pais",t.pais)),t?.moneda&&(e=e.set("moneda",t.moneda)),this.http.get(`${this.apiUrl}/metodos-pago`,{params:e}).pipe(x(o=>this.extraerDatos(o)),E(this.manejarError))}validarMetodoPago(t){return this.http.post(`${this.apiUrl}/validar-metodo-pago`,t).pipe(x(e=>this.extraerDatos(e)),E(this.manejarError))}iniciarCheckout(t){return this.actualizarEstado({en_proceso:!0}),this.http.post(`${this.apiUrl}/iniciar`,t).pipe(x(e=>this.extraerDatos(e)),j(e=>{this.actualizarEstado({items:e.items,checkout_token:e.checkout_token,en_proceso:!1})}),E(e=>(this.actualizarEstado({en_proceso:!1}),this.manejarError(e))))}validarDatosPersonales(t){return this.http.post(`${this.apiUrl}/validar-datos-personales`,t).pipe(x(e=>this.extraerDatos(e)),j(e=>{this.actualizarEstado({datos_personales:e,paso_actual:2})}),E(this.manejarError))}validarDireccionEnvio(t){return this.http.post(`${this.apiUrl}/validar-direccion-envio`,t).pipe(x(e=>this.extraerDatos(e)),j(e=>{this.actualizarEstado({direccion_envio:e})}),E(this.manejarError))}calcularEnvio(t){return this.http.post(`${this.apiUrl}/calcular-envio`,t).pipe(x(e=>this.extraerDatos(e)),E(this.manejarError))}aplicarCupon(t){return this.http.post(`${this.apiUrl}/aplicar-cupon`,t).pipe(x(e=>this.extraerDatos(e)),E(this.manejarError))}procesarPedido(t){return this.actualizarEstado({en_proceso:!0}),this.http.post(`${this.apiUrl}/procesar-pedido`,t).pipe(x(e=>this.extraerDatos(e)),j(e=>{this.actualizarEstado({en_proceso:!1})}),E(e=>(this.actualizarEstado({en_proceso:!1}),this.manejarError(e))))}obtenerResumen(t,e,o,s){let m={items:t,cupon_codigo:e,distrito:o,metodo_envio:s};return this.http.get(`${this.apiUrl}/resumen`,{params:this.convertirAHttpParams(m)}).pipe(x(O=>this.extraerDatos(O)),j(O=>{this.actualizarEstado({resumen:O})}),E(this.manejarError))}obtenerConfiguracion(){return this.configuracionCache$||(this.configuracionCache$=this.http.get(`${this.apiUrl}/configuracion`).pipe(x(t=>this.extraerDatos(t)),ge(1),E(this.manejarError))),this.configuracionCache$}generarFormTokenIzipay(t){return this.http.post(`${this.apiUrl}/izipay/generar-formtoken`,t).pipe(x(e=>this.extraerDatos(e)),E(this.manejarError))}validarPagoIzipay(t){return this.http.post(`${this.apiUrl}/izipay/validar-pago`,t).pipe(x(e=>this.extraerDatos(e)),E(this.manejarError))}verificarConfiguracionIzipay(){return this.http.get(`${this.apiUrl}/izipay/configuracion`).pipe(x(t=>this.extraerDatos(t)),E(this.manejarError))}probarConfiguracionIzipay(){return this.http.get(`${this.apiUrl}/izipay/test`).pipe(x(t=>this.extraerDatos(t)),E(this.manejarError))}simularPagoExitosoIzipay(t){return this.http.post(`${this.apiUrl}/izipay/simular-pago-exitoso`,t).pipe(x(e=>this.extraerDatos(e)),E(this.manejarError))}actualizarEstado(t){let e=this.estadoCheckoutSubject.value,o=$($({},e),t);this.estadoCheckoutSubject.next(o)}avanzarPaso(){let t=this.estadoCheckoutSubject.value.paso_actual;t<4&&this.actualizarEstado({paso_actual:t+1})}retrocederPaso(){let t=this.estadoCheckoutSubject.value.paso_actual;t>1&&this.actualizarEstado({paso_actual:t-1})}irAPaso(t){this.actualizarEstado({paso_actual:t})}limpiarEstado(){let t={paso_actual:1,items:[],en_proceso:!1};this.estadoCheckoutSubject.next(t)}establecerItems(t){this.actualizarEstado({items:t})}agregarError(t,e){let o=this.estadoCheckoutSubject.value,s=me($({},o.errores),{[t]:e});this.actualizarEstado({errores:s})}limpiarErrores(){this.actualizarEstado({errores:{}})}establecerMetodoPago(t){this.actualizarEstado({metodo_pago:t,paso_actual:3})}establecerMetodoEnvio(t){this.actualizarEstado({metodo_envio:t})}extraerDatos(t){if(!t.success)throw new Error(t.message||"Error en la respuesta de la API");if(!t.data)throw new Error("No se recibieron datos en la respuesta");return t.data}manejarError=t=>{let e="Error desconocido";return t.error instanceof ErrorEvent?e=`Error: ${t.error.message}`:t.status===422&&t.error?.errors?e=Object.values(t.error.errors).flat().join(", "):t.error?.message?e=t.error.message:e=`Error ${t.status}: ${t.statusText}`,console.error("Error en CheckoutService:",t),pe(()=>new Error(e))};convertirAHttpParams(t){let e=new de;return Object.keys(t).forEach(o=>{let s=t[o];s!=null&&(Array.isArray(s)?s.forEach((m,O)=>{typeof m=="object"?Object.keys(m).forEach(ce=>{e=e.append(`${o}[${O}][${ce}]`,m[ce])}):e=e.append(`${o}[${O}]`,m)}):typeof s=="object"?Object.keys(s).forEach(m=>{e=e.append(`${o}[${m}]`,s[m])}):e=e.append(o,s.toString()))}),e}puedeAvanzar(){let t=this.estadoCheckoutSubject.value;switch(t.paso_actual){case 1:return t.items.length>0;case 2:return!!(t.datos_personales&&t.direccion_envio);case 3:return!!(t.metodo_pago&&t.metodo_envio);default:return!1}}obtenerProgreso(){return(this.estadoCheckoutSubject.value.paso_actual-1)/3*100}esCheckoutCompleto(){return this.estadoCheckoutSubject.value.paso_actual===4}reiniciarCheckout(){this.limpiarEstado(),this.configuracionCache$=void 0}static \u0275fac=function(e){return new(e||r)(be(Se))};static \u0275prov=fe({token:r,factory:r.\u0275fac,providedIn:"root"})};var rt=["izipayContainer"];function at(r,t){r&1&&(i(0,"div",21),d(1,"div",35),i(2,"p",36),a(3," Cargando formulario de pago seguro... "),n(),i(4,"p",37),a(5," Por favor espera mientras preparamos el pago "),n()())}function lt(r,t){if(r&1){let e=D();i(0,"div",25)(1,"div",38),f(),i(2,"svg",39),d(3,"path",40),n()(),h(),i(4,"h5",41),a(5," Error al cargar el pago "),n(),i(6,"p",42),a(7),n(),i(8,"button",43),v("click",function(){y(e);let s=u();return P(s.reintentatCargarFormulario())}),a(9," Reintentar "),n()()}if(r&2){let e=u();l(7),A(e.error())}}function st(r,t){r&1&&(d(0,"div",44),i(1,"span"),a(2,"Procesando..."),n())}function dt(r,t){r&1&&(f(),i(0,"svg",45),d(1,"path",4),n(),h(),i(2,"span"),a(3,"Pagar Seguro"),n())}var ae=class r{checkoutService=w(re);renderer=w(he);izipayContainer;datosPersonales=k(null);direccionEnvio=k(null);metodoEnvio=k(null);itemsCarrito=k([]);totalCarrito=k(0);cargando=g(!1);error=g(null);pedidoActualId=g(null);pagoExitoso=I();anterior=I();izipayFormToken="";izipayPublicKey="";suscripciones=new G;puedeProceserPago=S(()=>this.datosPersonales()!==null&&this.direccionEnvio()!==null&&this.metodoEnvio()!==null&&this.itemsCarrito().length>0);ngOnInit(){console.log("\u{1F3AF} Componente PagoTarjetaIzipay inicializado")}ngOnDestroy(){this.suscripciones.unsubscribe()}procesarPago(){return L(this,null,function*(){if(console.log("\u{1F535} Iniciando proceso de pago con Izipay"),!this.puedeProceserPago()){this.error.set("Faltan datos para procesar el pago");return}this.cargando.set(!0),this.error.set(null);try{yield this.crearPedidoPreliminar()}catch(t){console.error("\u274C Error al procesar pago:",t),this.error.set("Error al procesar el pago"),this.cargando.set(!1)}})}crearPedidoPreliminar(){return L(this,null,function*(){let t={datos_personales:this.datosPersonales(),direccion_envio:this.direccionEnvio(),metodo_envio:this.metodoEnvio(),metodo_pago_id:1,items:this.itemsCarrito().map(e=>({producto_id:e.producto_id,cantidad:e.cantidad,precio_unitario:e.precio_unitario,subtotal:e.subtotal,variacion_id:e.variacion_id})),subtotal:this.totalCarrito(),costo_envio:this.metodoEnvio()?.precio||0,igv:this.totalCarrito()*.18,total:(this.totalCarrito()+(this.metodoEnvio()?.precio||0))*1.18,moneda:"PEN",pais:"PE"};this.suscripciones.add(this.checkoutService.procesarPedido(t).subscribe({next:e=>{if(console.log("\u2705 Pedido creado exitosamente:",e),!e||!e.pedido?.id)throw new Error("Error al crear el pedido: Respuesta inv\xE1lida");this.pedidoActualId.set(e.pedido.id),this.generarFormToken(e.pedido.id)},error:e=>{console.error("\u274C Error al crear pedido:",e),this.error.set("Error al procesar el pedido preliminar"),this.cargando.set(!1)}}))})}generarFormToken(t){let e={pedido_id:t,datos_personales:this.datosPersonales(),direccion_envio:this.direccionEnvio()};this.suscripciones.add(this.checkoutService.generarFormTokenIzipay(e).subscribe({next:o=>{if(console.log("\u2705 FormToken generado:",o),o.formToken&&o.publicKey)this.izipayFormToken=o.formToken,this.izipayPublicKey=o.publicKey,setTimeout(()=>this.inicializarFormularioIzipay(),1e3);else throw new Error("No se pudo generar el token de pago")},error:o=>{console.error("\u274C Error al generar FormToken:",o),this.error.set("Error al cargar el formulario de pago: "+(o.error?.message||o.message)),this.cargando.set(!1)}}))}inicializarFormularioIzipay(){if(console.log("\u{1F504} Inicializando formulario Izipay..."),!this.izipayFormToken||!this.izipayPublicKey){console.error("\u274C Faltan credenciales de Izipay"),this.error.set("Error: Faltan credenciales de pago");return}this.cargarEstilosIzipay(),import("./chunk-7LCYWG7D.js").then(t=>{let e="https://static.micuentaweb.pe";console.log("\u{1F4E6} Cargando librer\xEDa KRGlue..."),t.default.loadLibrary(e,this.izipayPublicKey).then(({KR:o})=>{if(console.log("\u2705 Librer\xEDa KRGlue cargada correctamente"),o.setFormConfig({formToken:this.izipayFormToken,"kr-language":"es-ES"}),!document.querySelector("#micuentawebstd_rest_wrapper")){console.error("\u274C Contenedor #micuentawebstd_rest_wrapper no encontrado"),this.error.set("Error: Contenedor de pago no disponible");return}o.attachForm("#micuentawebstd_rest_wrapper").then(({KR:m,result:O})=>{console.log("\u2705 Formulario adjuntado correctamente"),m.showForm(O.formId),this.error.set(null),this.cargando.set(!1)}).catch(m=>{console.error("\u274C Error al adjuntar formulario:",m),this.error.set("Error al cargar el formulario de pago"),this.cargando.set(!1)}),o.onSubmit(m=>{console.log("\u{1F4B3} Datos de pago recibidos:",m),this.procesarRespuestaIzipay(m)}),o.onError(m=>{console.error("\u274C Error en el formulario de Izipay:",m),this.error.set("Error en el formulario de pago: "+m.message)})}).catch(o=>{console.error("\u274C Error al cargar librer\xEDa KRGlue:",o),this.error.set("Error al cargar el formulario de pago"),this.cargando.set(!1)})}).catch(t=>{console.error("\u274C Error al importar @lyracom/embedded-form-glue:",t),this.error.set("Error al cargar las dependencias de pago"),this.cargando.set(!1)})}cargarEstilosIzipay(){let t=this.renderer.createElement("link");t.rel="stylesheet",t.href="https://static.micuentaweb.pe/static/js/krypton-client/V4.0/ext/classic-reset.css",this.renderer.appendChild(document.head,t);let e=this.renderer.createElement("script");e.src="https://static.micuentaweb.pe/static/js/krypton-client/V4.0/ext/classic.js",e.async=!0,this.renderer.appendChild(document.body,e)}procesarRespuestaIzipay(t){return L(this,null,function*(){try{console.log("\u{1F504} Procesando respuesta de Izipay:",t),this.cargando.set(!0);let e=t.rawClientAnswer||t.clientAnswer,o=t.hash;if(!e||!o)throw new Error("Datos de pago incompletos");this.suscripciones.add(this.checkoutService.validarPagoIzipay({"kr-answer":e,"kr-hash":o,pedido_id:this.pedidoActualId()||void 0}).subscribe({next:s=>{console.log("\u2705 Validaci\xF3n exitosa:",s),s.order_status==="PAID"?(this.pagoExitoso.emit(this.pedidoActualId()),this.error.set(null)):this.error.set(`Pago rechazado: ${s.order_status}`),this.cargando.set(!1)},error:s=>{console.error("\u274C Error validaci\xF3n:",s),this.error.set("Error al validar el pago: "+(s.error?.message||s.message||"Error desconocido")),this.cargando.set(!1)}}))}catch(e){console.error("\u274C Error procesando respuesta de Izipay:",e),this.error.set("Error al procesar los datos del pago"),this.cargando.set(!1)}})}reintentatCargarFormulario(){console.log("\u{1F504} Reintentando cargar formulario de Izipay..."),this.error.set(null),this.cargando.set(!0),this.izipayFormToken&&this.izipayPublicKey?setTimeout(()=>this.inicializarFormularioIzipay(),500):this.procesarPago()}onAnterior(){this.anterior.emit()}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=z({type:r,selectors:[["app-pago-tarjeta-izipay"]],viewQuery:function(e,o){if(e&1&&xe(rt,7),e&2){let s;Ee(s=ye())&&(o.izipayContainer=s.first)}},inputs:{datosPersonales:[1,"datosPersonales"],direccionEnvio:[1,"direccionEnvio"],metodoEnvio:[1,"metodoEnvio"],itemsCarrito:[1,"itemsCarrito"],totalCarrito:[1,"totalCarrito"]},outputs:{pagoExitoso:"pagoExitoso",anterior:"anterior"},standalone:!0,features:[T],decls:48,vars:8,consts:[["izipayContainer",""],[1,"p-6"],[1,"text-xl","font-semibold","text-gray-900","mb-4","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","mr-2","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"],[1,"space-y-3","mb-6"],[1,"flex","items-center","p-4","border-2","border-blue-500","bg-blue-50","rounded-lg","cursor-pointer"],["type","radio","name","metodoPago","value","1","checked","",1,"text-blue-600","focus:ring-blue-500"],[1,"ml-3","flex-1"],[1,"flex","justify-between","items-center"],[1,"flex","items-center"],[1,"font-medium"],[1,"ml-2","flex","space-x-1"],["src","https://cdn.worldvectorlogo.com/logos/visa-10.svg","alt","Visa",1,"h-6"],["src","https://cdn.worldvectorlogo.com/logos/mastercard-2.svg","alt","Mastercard",1,"h-6"],[1,"text-sm","text-green-600","font-medium"],[1,"text-sm","text-gray-600"],[1,"border","rounded-lg","p-6","bg-gray-50"],[1,"text-center","mb-6"],[1,"text-lg","font-medium","text-gray-900","mb-3"],["src","https://github.com/izipay-pe/Imagenes/blob/main/logo_tarjetas_aceptadas/logo-tarjetas-aceptadas-351x42.png?raw=true","alt","Tarjetas aceptadas",1,"h-10","mx-auto","mb-4"],[1,"text-center","py-12"],[1,"bg-white","rounded-lg","p-4","shadow-sm"],["id","micuentawebstd_rest_wrapper"],["kr-popin","true",1,"kr-embedded"],[1,"text-center","py-8"],[1,"mt-6","flex","items-center","justify-center","space-x-4","text-xs","text-gray-500"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4","mr-1","text-green-500"],["fill-rule","evenodd","d","M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule","evenodd"],["fill-rule","evenodd","d","M18 8a6 6 0 01-7.743 5.743L10 14l-4 1-1-4 .257-.257A6 6 0 1118 8zm-6-2a2 2 0 11-4 0 2 2 0 014 0z","clip-rule","evenodd"],[1,"mt-6","flex","justify-between"],[1,"px-6","py-2","border","border-gray-300","text-gray-700","rounded-lg","hover:bg-gray-50","transition-colors","flex","items-center",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"px-8","py-3","bg-green-600","text-white","rounded-lg","hover:bg-green-700","transition-colors","flex","items-center","disabled:opacity-50","disabled:cursor-not-allowed","font-medium",3,"click","disabled"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-blue-600","mx-auto"],[1,"mt-4","text-gray-600","font-medium"],[1,"text-sm","text-gray-500","mt-2"],[1,"w-16","h-16","mx-auto","bg-red-100","rounded-full","flex","items-center","justify-center","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-lg","font-medium","text-red-900","mb-2"],[1,"text-sm","text-red-600","mb-4"],[1,"px-4","py-2","bg-red-600","text-white","rounded-lg","hover:bg-red-700","transition-colors",3,"click"],[1,"animate-spin","rounded-full","h-4","w-4","border-b-2","border-white","mr-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2"]],template:function(e,o){if(e&1){let s=D();i(0,"div",1)(1,"h2",2),f(),i(2,"svg",3),d(3,"path",4),n(),a(4," M\xE9todo de Pago "),n(),h(),i(5,"div",5)(6,"label",6),d(7,"input",7),i(8,"div",8)(9,"div",9)(10,"div",10)(11,"span",11),a(12,"Tarjeta de Cr\xE9dito/D\xE9bito"),n(),i(13,"div",12),d(14,"img",13)(15,"img",14),n()(),i(16,"span",15),a(17,"Seguro"),n()(),i(18,"p",16),a(19,"Pago seguro con Izipay"),n()()()(),i(20,"div",17)(21,"div",18)(22,"h4",19),a(23," Pago con tarjeta de cr\xE9dito/d\xE9bito "),n(),d(24,"img",20),n(),p(25,at,6,0,"div",21),i(26,"div",22,0)(28,"div",23),d(29,"div",24),n()(),p(30,lt,10,1,"div",25),i(31,"div",26)(32,"div",10),f(),i(33,"svg",27),d(34,"path",28),n(),a(35," Pago seguro SSL "),n(),h(),i(36,"div",10),f(),i(37,"svg",27),d(38,"path",29),n(),a(39," Protegido por Izipay "),n()()(),h(),i(40,"div",30)(41,"button",31),v("click",function(){return y(s),P(o.onAnterior())}),f(),i(42,"svg",32),d(43,"path",33),n(),a(44," Anterior "),n(),h(),i(45,"button",34),v("click",function(){return y(s),P(o.procesarPago())}),p(46,st,3,0)(47,dt,4,0),n()()()}e&2&&(l(25),c(o.cargando()?25:-1),l(),M("opacity-50",o.cargando())("pointer-events-none",o.cargando()),l(4),c(o.error()?30:-1),l(15),_("disabled",!o.puedeProceserPago()||o.cargando()),l(),c(o.cargando()?46:47))},dependencies:[F],styles:[".payment-container[_ngcontent-%COMP%]{position:relative}.payment-form[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f9fafb,#f3f4f6);border-radius:12px;padding:2rem;border:1px solid #e5e7eb}#micuentawebstd_rest_wrapper[_ngcontent-%COMP%]{min-height:400px;position:relative}.kr-embedded[_ngcontent-%COMP%]{border-radius:8px;overflow:hidden}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:300px}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-container[_ngcontent-%COMP%]{background:#fef2f2;border:1px solid #fecaca;border-radius:8px;padding:1.5rem;text-align:center}.error-icon[_ngcontent-%COMP%]{color:#dc2626}.error-title[_ngcontent-%COMP%]{color:#991b1b;font-weight:600;margin-bottom:.5rem}.error-message[_ngcontent-%COMP%]{color:#b91c1c;margin-bottom:1rem}.retry-button[_ngcontent-%COMP%]{background:#dc2626;color:#fff;padding:.5rem 1rem;border-radius:6px;border:none;cursor:pointer;transition:all .2s ease}.retry-button[_ngcontent-%COMP%]:hover{background:#b91c1c;transform:translateY(-1px)}.security-info[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:1rem;margin-top:1rem;padding:1rem;background:#f0f9ff;border-radius:8px}.security-badge[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:.75rem;color:#0369a1}.security-icon[_ngcontent-%COMP%]{color:#059669;margin-right:.25rem}.navigation-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:2rem;gap:1rem}.btn-secondary[_ngcontent-%COMP%]{background:#f3f4f6;color:#374151;border:1px solid #d1d5db;padding:.5rem 1.5rem;border-radius:8px;cursor:pointer;transition:all .2s ease}.btn-secondary[_ngcontent-%COMP%]:hover{background:#e5e7eb;transform:translateY(-1px)}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#059669,#047857);color:#fff;border:none;padding:.75rem 2rem;border-radius:8px;cursor:pointer;font-weight:600;transition:all .2s ease}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#047857,#065f46);transform:translateY(-1px);box-shadow:0 4px 12px #0596694d}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;transform:none}@media (max-width: 768px){.payment-form[_ngcontent-%COMP%]{padding:1rem}.navigation-buttons[_ngcontent-%COMP%]{flex-direction:column}.security-info[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}}.kr-embedded[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{border-radius:8px}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-in}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}"]})};function ct(r,t){if(r&1&&(i(0,"div")(1,"p",8),a(2,"Direcci\xF3n de env\xEDo:"),n(),i(3,"p",29),a(4),n(),i(5,"p",26),a(6),n()()),r&2){let e,o,s=u(2);l(4),C(" ",(e=s.direccionEnvio())==null?null:e.direccion," "),l(2),se(" ",(o=s.direccionEnvio())==null?null:o.distrito,", ",(o=s.direccionEnvio())==null?null:o.provincia," ")}}function mt(r,t){if(r&1&&(i(0,"div",13)(1,"div",28)(2,"div")(3,"p",8),a(4,"Cliente:"),n(),i(5,"p",29),a(6),n(),i(7,"p",26),a(8),n()(),p(9,ct,7,3,"div"),n()()),r&2){let e,o,s=u();l(6),se(" ",(e=s.datosPersonales())==null?null:e.nombre," ",(e=s.datosPersonales())==null?null:e.apellidos," "),l(2),C(" ",(o=s.datosPersonales())==null?null:o.email," "),l(),c(s.direccionEnvio()?9:-1)}}var le=class r{router=w(H);pedidoId=k(null);datosPersonales=k(null);direccionEnvio=k(null);metodoEnvio=k(null);metodoPago=k(null);totalCarrito=k(0);cargando=g(!1);numeroPedidoFormateado=S(()=>{let t=this.pedidoId();return t?`PED-${String(t).padStart(6,"0")}`:"N/A"});totalFinal=S(()=>{let t=this.totalCarrito(),e=this.metodoEnvio()?.precio||0;return(t+e)*1.18});ngOnInit(){console.log("\u2705 Componente de confirmaci\xF3n inicializado"),console.log("Pedido ID:",this.pedidoId())}irAMisPedidos(){this.router.navigate(["/cuenta/pedidos"])}continuarComprando(){this.router.navigate(["/"])}descargarComprobante(){console.log("Descargando comprobante del pedido:",this.pedidoId())}enviarPorEmail(){console.log("Enviando comprobante por email para pedido:",this.pedidoId())}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=z({type:r,selectors:[["app-confirmacion"]],inputs:{pedidoId:[1,"pedidoId"],datosPersonales:[1,"datosPersonales"],direccionEnvio:[1,"direccionEnvio"],metodoEnvio:[1,"metodoEnvio"],metodoPago:[1,"metodoPago"],totalCarrito:[1,"totalCarrito"]},standalone:!0,features:[T],decls:53,vars:4,consts:[[1,"p-8","text-center"],[1,"w-20","h-20","mx-auto","bg-green-100","rounded-full","flex","items-center","justify-center","mb-6"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-10","h-10","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"text-3xl","font-bold","text-gray-900","mb-3"],[1,"text-lg","text-gray-600","mb-8"],[1,"bg-gradient-to-r","from-green-50","to-blue-50","rounded-xl","p-6","mb-8"],[1,"grid","grid-cols-2","gap-4","text-left"],[1,"text-sm","text-gray-600"],[1,"text-xl","font-bold","text-gray-900"],[1,"text-xl","font-bold","text-green-600"],[1,"text-lg","font-medium","text-gray-900"],[1,"text-lg","font-medium","text-green-600"],[1,"mt-6","pt-4","border-t","border-gray-200"],[1,"space-y-3","mb-6"],[1,"w-full","bg-blue-600","text-white","px-8","py-3","rounded-lg","font-medium","hover:bg-blue-700","transition-colors",3,"click"],[1,"w-full","bg-gray-100","text-gray-700","px-8","py-3","rounded-lg","font-medium","hover:bg-gray-200","transition-colors",3,"click"],[1,"flex","flex-col","sm:flex-row","gap-3","justify-center","mb-8"],[1,"flex","items-center","justify-center","px-4","py-2","text-blue-600","border","border-blue-600","rounded-lg","hover:bg-blue-50","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"flex","items-center","justify-center","px-4","py-2","text-gray-600","border","border-gray-300","rounded-lg","hover:bg-gray-50","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],[1,"mt-8","p-4","bg-blue-50","rounded-lg"],[1,"text-sm","text-blue-800"],[1,"mt-6","text-center"],[1,"text-sm","text-gray-500"],["href","/contacto",1,"text-blue-600","hover:text-blue-700","font-medium"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","text-left"],[1,"text-base","font-medium","text-gray-900"]],template:function(e,o){if(e&1&&(i(0,"div",0)(1,"div",1),f(),i(2,"svg",2),d(3,"path",3),n()(),h(),i(4,"h2",4),a(5,"\xA1Pago Confirmado!"),n(),i(6,"p",5),a(7," Tu pedido ha sido procesado exitosamente y el pago fue aprobado "),n(),i(8,"div",6)(9,"div",7)(10,"div")(11,"p",8),a(12,"N\xFAmero de pedido:"),n(),i(13,"p",9),a(14),n()(),i(15,"div")(16,"p",8),a(17,"Total pagado:"),n(),i(18,"p",10),a(19),n()(),i(20,"div")(21,"p",8),a(22,"M\xE9todo de pago:"),n(),i(23,"p",11),a(24),n()(),i(25,"div")(26,"p",8),a(27,"Estado:"),n(),i(28,"p",12),a(29,"\u2713 Aprobado"),n()()(),p(30,mt,10,4,"div",13),n(),i(31,"div",14)(32,"button",15),v("click",function(){return o.irAMisPedidos()}),a(33," Ver Mis Pedidos "),n(),i(34,"button",16),v("click",function(){return o.continuarComprando()}),a(35," Continuar Comprando "),n()(),i(36,"div",17)(37,"button",18),v("click",function(){return o.descargarComprobante()}),f(),i(38,"svg",19),d(39,"path",20),n(),a(40," Descargar Comprobante "),n(),h(),i(41,"button",21),v("click",function(){return o.enviarPorEmail()}),f(),i(42,"svg",19),d(43,"path",22),n(),a(44," Enviar por Email "),n()(),h(),i(45,"div",23)(46,"p",24),a(47," \u{1F4E7} Recibir\xE1s un correo de confirmaci\xF3n en breve con todos los detalles de tu pedido y el seguimiento de env\xEDo. "),n()(),i(48,"div",25)(49,"p",26),a(50," \xBFTienes alguna pregunta? "),i(51,"a",27),a(52," Cont\xE1ctanos "),n()()()()),e&2){let s;l(14),C(" ",o.numeroPedidoFormateado()," "),l(5),C(" S/ ",o.totalFinal().toFixed(2)," "),l(5),C(" ",((s=o.metodoPago())==null?null:s.nombre)||"Tarjeta de Cr\xE9dito/D\xE9bito"," "),l(6),c(o.datosPersonales()?30:-1)}},dependencies:[F],styles:[".confirmation-container[_ngcontent-%COMP%]{text-align:center;padding:2rem}.success-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_successPulse 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_successPulse{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}.order-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ecfdf5,#dbeafe);border-radius:16px;padding:2rem;border:1px solid #a7f3d0;margin:2rem 0}.order-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;text-align:left}.order-detail[_ngcontent-%COMP%]{padding:.5rem 0}.order-label[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280;margin-bottom:.25rem}.order-value[_ngcontent-%COMP%]{font-weight:600;color:#111827}.order-value.success[_ngcontent-%COMP%]{color:#059669}.order-value.primary[_ngcontent-%COMP%]{color:#2563eb}.customer-info[_ngcontent-%COMP%]{border-top:1px solid #e5e7eb;padding-top:1.5rem;margin-top:1.5rem}.action-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;margin:2rem 0}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2563eb,#1d4ed8);color:#fff;padding:.75rem 2rem;border-radius:8px;border:none;font-weight:600;cursor:pointer;transition:all .2s ease}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#1d4ed8,#1e40af);transform:translateY(-1px);box-shadow:0 4px 12px #2563eb4d}.btn-secondary[_ngcontent-%COMP%]{background:#f3f4f6;color:#374151;padding:.75rem 2rem;border-radius:8px;border:1px solid #d1d5db;font-weight:500;cursor:pointer;transition:all .2s ease}.btn-secondary[_ngcontent-%COMP%]:hover{background:#e5e7eb;transform:translateY(-1px)}.secondary-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;margin:1.5rem 0}@media (min-width: 640px){.secondary-actions[_ngcontent-%COMP%]{flex-direction:row;justify-content:center}}.action-link[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:.5rem 1rem;border:1px solid #d1d5db;border-radius:6px;color:#374151;text-decoration:none;transition:all .2s ease}.action-link[_ngcontent-%COMP%]:hover{background:#f9fafb;border-color:#9ca3af;transform:translateY(-1px)}.action-link.primary[_ngcontent-%COMP%]{border-color:#3b82f6;color:#3b82f6}.action-link.primary[_ngcontent-%COMP%]:hover{background:#eff6ff;border-color:#2563eb}.info-box[_ngcontent-%COMP%]{background:#eff6ff;border:1px solid #bfdbfe;border-radius:8px;padding:1rem;margin:2rem 0}.info-text[_ngcontent-%COMP%]{color:#1e40af;font-size:.875rem;line-height:1.5}.contact-info[_ngcontent-%COMP%]{margin-top:2rem;padding-top:1.5rem;border-top:1px solid #e5e7eb}.contact-text[_ngcontent-%COMP%]{color:#6b7280;font-size:.875rem}.contact-link[_ngcontent-%COMP%]{color:#3b82f6;text-decoration:none;font-weight:500}.contact-link[_ngcontent-%COMP%]:hover{color:#2563eb;text-decoration:underline}@media (max-width: 768px){.confirmation-container[_ngcontent-%COMP%]{padding:1rem}.order-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}.order-info[_ngcontent-%COMP%]{padding:1.5rem}}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-in}.slide-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideUp .4s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}"]})};var ut=(r,t)=>t.numero,pt=(r,t)=>t.producto_id,gt=(r,t,e)=>({"bg-blue-600 border-blue-600 text-white":r,"bg-green-600 border-green-600 text-white":t,"bg-gray-200 border-gray-300 text-gray-400":e}),ft=(r,t,e)=>({"text-blue-600":r,"text-green-600":t,"text-gray-400":e}),bt=(r,t,e)=>({"bg-green-600":r,"bg-blue-600":t,"bg-gray-300":e});function vt(r,t){r&1&&(f(),i(0,"svg",34),d(1,"path",30),n())}function ht(r,t){if(r&1&&(i(0,"span",35),a(1),n()),r&2){let e=u().$implicit;l(),A(e.numero)}}function Ct(r,t){if(r&1&&d(0,"div",39),r&2){let e=u().$implicit,o=u();_("ngClass",q(1,bt,e.numero<o.pasoActual(),e.numero===o.pasoActual(),e.numero>o.pasoActual()))}}function _t(r,t){if(r&1){let e=D();i(0,"div",32)(1,"div",33),v("click",function(){let s=y(e).$implicit,m=u();return P(m.irAPaso(s.numero))}),p(2,vt,2,0,":svg:svg",34)(3,ht,2,1,"span",35),n(),i(4,"div",36)(5,"p",37),a(6),n(),i(7,"p",38),a(8),n()(),p(9,Ct,1,5,"div",39),n()}if(r&2){let e=t.$implicit,o=u();_e(e.numero<o.pasos.length?"flex-1":""),l(),M("cursor-pointer",e.numero<o.pasoActual()||o.puedeAvanzarAPaso(e.numero)),_("ngClass",q(10,gt,o.getClasePaso(e.numero)==="active",o.getClasePaso(e.numero)==="completed",o.getClasePaso(e.numero)==="pending")),l(),c(o.getClasePaso(e.numero)==="completed"?2:3),l(3),_("ngClass",q(14,ft,o.getClasePaso(e.numero)==="active",o.getClasePaso(e.numero)==="completed",o.getClasePaso(e.numero)==="pending")),l(),C(" ",e.titulo," "),l(2),A(e.tiempo),l(),c(e.numero<o.pasos.length?9:-1)}}function xt(r,t){if(r&1){let e=D();i(0,"app-datos-cliente",40),v("datosActualizados",function(s){y(e);let m=u();return P(m.onDatosPersonalesActualizados(s))})("siguiente",function(){y(e);let s=u();return P(s.onSiguienteDesdeCliente())}),n()}}function Et(r,t){if(r&1){let e=D();i(0,"app-envio-resumen",41),v("direccionActualizada",function(s){y(e);let m=u();return P(m.onDireccionEnvioActualizada(s))})("metodoEnvioSeleccionado",function(s){y(e);let m=u();return P(m.onMetodoEnvioSeleccionado(s))})("anterior",function(){y(e);let s=u();return P(s.onAnteriorDesdeEnvio())})("siguiente",function(){y(e);let s=u();return P(s.onSiguienteDesdeEnvio())}),n()}if(r&2){let e=u();_("datosPersonales",e.datosPersonales())}}function yt(r,t){if(r&1){let e=D();i(0,"app-pago-tarjeta-izipay",42),v("pagoExitoso",function(s){y(e);let m=u();return P(m.onPagoExitoso(s))})("anterior",function(){y(e);let s=u();return P(s.onAnteriorDesdePago())}),n()}if(r&2){let e=u();_("datosPersonales",e.datosPersonales())("direccionEnvio",e.direccionEnvio())("metodoEnvio",e.metodoEnvio())("itemsCarrito",e.itemsCarrito())("totalCarrito",e.totalCarrito())}}function Pt(r,t){if(r&1&&d(0,"app-confirmacion",16),r&2){let e=u();_("pedidoId",e.pedidoFinalId())("datosPersonales",e.datosPersonales())("direccionEnvio",e.direccionEnvio())("metodoEnvio",e.metodoEnvio())("metodoPago",e.metodoPago())("totalCarrito",e.totalCarrito())}}function St(r,t){if(r&1&&(i(0,"div",22),d(1,"img",43),i(2,"div",44)(3,"p",45),a(4),n(),i(5,"p",46),a(6),n()(),i(7,"p",47),a(8),n()()),r&2){let e=t.$implicit;l(),_("src",(e.producto==null?null:e.producto.imagen_principal)||"/assets/img/producto-default.jpg",ve)("alt",(e.producto==null?null:e.producto.nombre)||"Producto"),l(3),C(" ",(e.producto==null?null:e.producto.nombre)||"Producto"," "),l(2),C(" Cantidad: ",e.cantidad," "),l(2),C(" S/ ",e.subtotal.toFixed(2)," ")}}function kt(r,t){if(r&1&&(i(0,"div",24)(1,"span",4),a(2,"Env\xEDo"),n(),i(3,"span",25),a(4),n()()),r&2){let e,o=u();l(4),C("S/ ",((e=o.metodoEnvio())==null||e.precio==null?null:e.precio.toFixed(2))||"0.00","")}}function Mt(r,t){if(r&1&&(i(0,"div",31)(1,"div",32),f(),i(2,"svg",48),d(3,"path",49),n(),a(4),n()()),r&2){let e=u();l(4),C(" ",e.error()," ")}}var Oe=class r{carritoService=w(we);router=w(H);pasoActual=g(1);cargando=g(!1);error=g(null);datosPersonales=g(null);direccionEnvio=g(null);metodoEnvio=g(null);metodoPago=g(null);pedidoFinalId=g(null);itemsCarrito=S(()=>this.carritoService.items().map(t=>this.convertirItemCarritoACheckout(t)));totalCarrito=S(()=>this.carritoService.total());paso1Valido=S(()=>!!this.datosPersonales());paso2Valido=S(()=>!!this.direccionEnvio()&&!!this.metodoEnvio());paso3Valido=S(()=>!!this.metodoPago());suscripciones=new G;pasos=[{numero:1,titulo:"Datos del Cliente",icono:"user",tiempo:"30 seg"},{numero:2,titulo:"Env\xEDo y Resumen",icono:"truck",tiempo:"45 seg"},{numero:3,titulo:"M\xE9todo de Pago",icono:"credit-card",tiempo:"60 seg"},{numero:4,titulo:"Confirmaci\xF3n",icono:"check-circle",tiempo:"15 seg"}];ngOnInit(){this.verificarCarrito(),this.configurarMetodoPagoDefecto()}ngOnDestroy(){this.suscripciones.unsubscribe()}verificarCarrito(){if(this.itemsCarrito().length===0){this.router.navigate(["/carrito"]);return}}configurarMetodoPagoDefecto(){let t={id:1,nombre:"Tarjeta de Cr\xE9dito/D\xE9bito",tipo:"tarjeta_credito",descripcion:"Pago seguro con Izipay",logo_url:"",activo:!0,tiempo_procesamiento:"Inmediato",tiempo_procesamiento_texto:"Procesamiento inmediato",permite_cuotas:!0,pais_disponible:["PE"],moneda_soportada:"PEN",es_tarjeta:!0,es_billetera_digital:!1,es_transferencia:!1,es_efectivo:!1};this.metodoPago.set(t)}irAPaso(t){(t<this.pasoActual()||this.puedeAvanzarAPaso(t))&&this.pasoActual.set(t)}puedeAvanzarAPaso(t){switch(t){case 2:return this.paso1Valido();case 3:return this.paso1Valido()&&this.paso2Valido();case 4:return this.paso1Valido()&&this.paso2Valido()&&this.paso3Valido();default:return!0}}onDatosPersonalesActualizados(t){this.datosPersonales.set(t)}onSiguienteDesdeCliente(){this.paso1Valido()&&this.pasoActual.set(2)}onDireccionEnvioActualizada(t){this.direccionEnvio.set(t)}onMetodoEnvioSeleccionado(t){this.metodoEnvio.set(t)}onAnteriorDesdeEnvio(){this.pasoActual.set(1)}onSiguienteDesdeEnvio(){this.paso2Valido()&&this.pasoActual.set(3)}onAnteriorDesdePago(){this.pasoActual.set(2)}onPagoExitoso(t){this.pedidoFinalId.set(t),this.pasoActual.set(4)}getProgreso(){return this.pasoActual()/this.pasos.length*100}getClasePaso(t){return t<this.pasoActual()?"completed":t===this.pasoActual()?"active":"pending"}convertirItemCarritoACheckout(t){return{producto_id:t.producto_id,producto:{id:t.producto_id,nombre:t.nombre,imagen_principal:t.imagen,peso:t.peso},cantidad:t.cantidad,precio_unitario:t.precio,subtotal:t.subtotal,variacion_id:t.variacion_id,variacion:t.variacion?{id:t.variacion_id||0,nombre:t.variacion.talla||t.variacion.color?.nombre||"",color:t.variacion.color?.nombre,talla:t.variacion.talla}:void 0}}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=z({type:r,selectors:[["app-checkout"]],standalone:!0,features:[T],decls:60,vars:11,consts:[[1,"min-h-screen","bg-gray-50","py-8"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"text-center","mb-8"],[1,"text-3xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"mb-8"],[1,"flex","items-center","justify-between"],[1,"flex","items-center",3,"class"],[1,"mt-4"],[1,"bg-gray-200","rounded-full","h-2"],[1,"bg-gradient-to-r","from-blue-500","to-green-500","h-2","rounded-full","transition-all","duration-500"],[1,"grid","grid-cols-1","lg:grid-cols-12","gap-8"],[1,"lg:col-span-8"],[1,"bg-white","rounded-xl","shadow-lg","overflow-hidden"],[3,"datosPersonales"],[3,"datosPersonales","direccionEnvio","metodoEnvio","itemsCarrito","totalCarrito"],[3,"pedidoId","datosPersonales","direccionEnvio","metodoEnvio","metodoPago","totalCarrito"],[1,"lg:col-span-4"],[1,"bg-white","rounded-xl","shadow-lg","sticky","top-8"],[1,"p-6"],[1,"text-lg","font-semibold","text-gray-900","mb-4"],[1,"space-y-4","mb-6"],[1,"flex","items-center","space-x-3"],[1,"border-t","border-gray-200","pt-4","space-y-2"],[1,"flex","justify-between","text-sm"],[1,"text-gray-900"],[1,"flex","justify-between","text-lg","font-bold","text-gray-900","pt-2","border-t","border-gray-200"],[1,"mt-6","space-y-2"],[1,"flex","items-center","text-sm","text-gray-600"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4","mr-2","text-green-500"],["fill-rule","evenodd","d","M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule","evenodd"],[1,"fixed","bottom-4","right-4","bg-red-500","text-white","px-6","py-3","rounded-lg","shadow-lg","z-50"],[1,"flex","items-center"],[1,"flex","items-center","justify-center","w-10","h-10","rounded-full","border-2","transition-all","duration-300",3,"click","ngClass"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5"],[1,"text-sm","font-medium"],[1,"ml-3","hidden","sm:block"],[1,"text-sm","font-medium",3,"ngClass"],[1,"text-xs","text-gray-500"],[1,"flex-1","h-0.5","mx-4","transition-all","duration-300",3,"ngClass"],[3,"datosActualizados","siguiente"],[3,"direccionActualizada","metodoEnvioSeleccionado","anterior","siguiente","datosPersonales"],[3,"pagoExitoso","anterior","datosPersonales","direccionEnvio","metodoEnvio","itemsCarrito","totalCarrito"],[1,"w-12","h-12","object-cover","rounded-lg",3,"src","alt"],[1,"flex-1","min-w-0"],[1,"text-sm","font-medium","text-gray-900","truncate"],[1,"text-sm","text-gray-500"],[1,"text-sm","font-medium","text-gray-900"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5","mr-2"],["fill-rule","evenodd","d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule","evenodd"]],template:function(e,o){if(e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),a(4,"Finalizar Compra"),n(),i(5,"p",4),a(6,"Completa tu pedido en pocos pasos"),n()(),i(7,"div",5)(8,"div",6),V(9,_t,10,18,"div",7,ut),n(),i(11,"div",8)(12,"div",9),d(13,"div",10),n()()(),i(14,"div",11)(15,"div",12)(16,"div",13),p(17,xt,1,0,"app-datos-cliente")(18,Et,1,1,"app-envio-resumen",14)(19,yt,1,5,"app-pago-tarjeta-izipay",15)(20,Pt,1,6,"app-confirmacion",16),n()(),i(21,"div",17)(22,"div",18)(23,"div",19)(24,"h3",20),a(25," Resumen del Pedido "),n(),i(26,"div",21),V(27,St,9,5,"div",22,pt),n(),i(29,"div",23)(30,"div",24)(31,"span",4),a(32,"Subtotal"),n(),i(33,"span",25),a(34),n()(),p(35,kt,5,1,"div",24),i(36,"div",24)(37,"span",4),a(38,"IGV (18%)"),n(),i(39,"span",25),a(40),n()(),i(41,"div",26)(42,"span"),a(43,"Total"),n(),i(44,"span"),a(45),n()()(),i(46,"div",27)(47,"div",28),f(),i(48,"svg",29),d(49,"path",30),n(),a(50," Pago 100% seguro "),n(),h(),i(51,"div",28),f(),i(52,"svg",29),d(53,"path",30),n(),a(54," Garant\xEDa de devoluci\xF3n "),n(),h(),i(55,"div",28),f(),i(56,"svg",29),d(57,"path",30),n(),a(58," Soporte 24/7 "),n()()()()()(),p(59,Mt,5,1,"div",31),n()()),e&2){let s;l(9),R(o.pasos),l(4),Ce("width",o.getProgreso(),"%"),l(4),c(o.pasoActual()===1?17:-1),l(),c(o.pasoActual()===2?18:-1),l(),c(o.pasoActual()===3?19:-1),l(),c(o.pasoActual()===4?20:-1),l(7),R(o.itemsCarrito()),l(7),C("S/ ",o.totalCarrito().toFixed(2),""),l(),c(o.metodoEnvio()?35:-1),l(5),C("S/ ",(o.totalCarrito()*.18).toFixed(2),""),l(5),C("S/ ",((o.totalCarrito()+(((s=o.metodoEnvio())==null?null:s.precio)||0))*1.18).toFixed(2),""),l(14),c(o.error()?59:-1)}},dependencies:[F,Pe,oe,ie,ae,le],styles:['.checkout-container[_ngcontent-%COMP%]{min-height:calc(100vh - 200px)}.step-transition[_ngcontent-%COMP%]{transition:all .3s ease-in-out}.form-input[_ngcontent-%COMP%]:focus{outline:none;ring:2px;ring-offset:2px;ring-blue-500:true;border-color:#3b82f6}#izipay-form-container[_ngcontent-%COMP%]{border-radius:.5rem;overflow:hidden}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.step-completed[_ngcontent-%COMP%]{background-color:#10b981;border-color:#10b981;color:#fff}.step-active[_ngcontent-%COMP%]{background-color:#3b82f6;border-color:#3b82f6;color:#fff}.step-pending[_ngcontent-%COMP%]{background-color:#f3f4f6;border-color:#d1d5db;color:#6b7280}@media (max-width: 768px){.checkout-container[_ngcontent-%COMP%]{padding:1rem}.step-info[_ngcontent-%COMP%]{display:none}}.order-summary[_ngcontent-%COMP%]{position:sticky;top:2rem}.custom-radio[_ngcontent-%COMP%]:checked{background-color:#3b82f6;border-color:#3b82f6}.hover-lift[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 10px 25px -5px #0000001a;transition:all .3s ease}.field-valid[_ngcontent-%COMP%]{border-color:#10b981}.field-invalid[_ngcontent-%COMP%]{border-color:#ef4444}.pay-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);transition:all .3s ease}.pay-button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#059669,#047857);transform:translateY(-1px);box-shadow:0 8px 20px #10b9814d}.card-shadow[_ngcontent-%COMP%]{box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.card-shadow-lg[_ngcontent-%COMP%]{box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d}.progress-step[_ngcontent-%COMP%]{position:relative}.progress-step[_ngcontent-%COMP%]:after{content:"";position:absolute;top:50%;left:100%;width:100%;height:2px;background:currentColor;transform:translateY(-50%);z-index:-1}.progress-step[_ngcontent-%COMP%]:last-child:after{display:none}.step-clickable[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 4px 12px #00000026}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}.loading-pulse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s cubic-bezier(.4,0,.6,1) infinite}.notification-slide-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInRight .3s ease-out}@keyframes _ngcontent-%COMP%_slideInRight{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}.form-input[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #3b82f61a;border-color:#3b82f6}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#1d4ed8);transition:all .2s ease}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#1d4ed8,#1e40af);transform:translateY(-1px);box-shadow:0 4px 12px #3b82f666}.order-summary[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background:#fffffff2}.cart-item[_ngcontent-%COMP%]{transition:all .2s ease}.cart-item[_ngcontent-%COMP%]:hover{background-color:#f8fafc;border-radius:8px}.guarantee-icon[_ngcontent-%COMP%]{filter:drop-shadow(0 1px 2px rgba(34,197,94,.2))}']})};export{Oe as CheckoutComponent};
