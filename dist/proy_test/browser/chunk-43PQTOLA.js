import{a as $}from"./chunk-DEFHCXPJ.js";import{a as B}from"./chunk-HW5HQAUM.js";import"./chunk-6WUTALT2.js";import{A as w,Aa as z,Ba as d,G as b,H as x,I as v,Ia as E,J as g,N as T,U as N,V as j,Va as _,Y as r,ba as y,cb as A,da as m,ea as D,fa as h,ha as S,j as I,la as p,oa as V,pa as P,qa as t,ra as i,sa as u,sb as F,ta as k,tb as H,ua as f,ub as O,va as l,vb as R,wb as G,yb as U,z as M,za as s}from"./chunk-A4STRE5Y.js";import"./chunk-6MDQTQU3.js";var Q=(a,n)=>n.id;function W(a,n){if(a&1&&u(0,"img",5),a&2){let e=l();h("src",e.usuario==null?null:e.usuario.profile_image,j)("alt",e.usuario==null?null:e.usuario.name)}}function X(a,n){if(a&1&&(t(0,"span",6),s(1),i()),a&2){let e=l();r(),d(" ",e.inicialUsuario()," ")}}function Y(a,n){if(a&1&&(t(0,"div",11),v(),t(1,"svg",20),u(2,"path",21),i(),g(),t(3,"span",22),s(4),i()()),a&2){let e=l();r(4),d(" ",e.estadisticas==null?null:e.estadisticas.total_pedidos," pedidos realizados ")}}function Z(a,n){if(a&1&&(t(0,"div",12)(1,"div",23)(2,"div",6),s(3),i(),t(4,"div",22),s(5,"Entregados"),i()(),t(6,"div",23)(7,"div",6),s(8),i(),t(9,"div",22),s(10,"Favoritos"),i()()()),a&2){let e=l();r(3),d(" ",e.estadisticas.pedidos_entregados," "),r(5),d(" ",e.estadisticas.total_favoritos," ")}}function ee(a,n){if(a&1&&(t(0,"span",30),s(1),i()),a&2){let e=l().$implicit;r(),d(" ",e.badge>99?"99+":e.badge," ")}}function te(a,n){if(a&1&&(t(0,"p",31),s(1),i()),a&2){let e=l().$implicit;r(),d(" ",e.descripcion," ")}}function ie(a,n){if(a&1&&(t(0,"div",32),v(),t(1,"svg",33),u(2,"path",34),i()()),a&2){let e=l().$implicit;r(),S("text-blue-600",e.activo)("text-gray-400",!e.activo)("group-hover:text-gray-500",!e.activo)}}function ne(a,n){if(a&1){let e=k();t(0,"button",24),f("click",function(){let c=b(e).$implicit,C=l();return x(C.seleccionarItem(c))}),t(1,"div",25)(2,"div",26),v(),u(3,"svg",27),i()(),g(),t(4,"div",8)(5,"div",28)(6,"span",29),s(7),i(),m(8,ee,2,1,"span",30),i(),m(9,te,2,1,"p",31),i(),m(10,ie,3,6,"div",32),i()}if(a&2){let e=n.$implicit,o=l();S("bg-blue-50",e.activo)("border-r-3",e.activo)("border-blue-600",e.activo),D("aria-current",e.activo?"page":null),r(2),S("bg-blue-100",e.activo)("text-blue-600",e.activo)("text-gray-500",!e.activo)("group-hover:bg-gray-100",!e.activo)("group-hover:text-gray-600",!e.activo),r(),h("innerHTML",e.icono,N),r(3),S("text-blue-600",e.activo)("text-gray-900",!e.activo)("group-hover:text-gray-900",!e.activo),r(),d(" ",e.titulo," "),r(),p(e.badge&&e.badge>0?8:-1),r(),p(!o.esMobile&&e.descripcion?9:-1),r(),p(o.esMobile?-1:10)}}function oe(a,n){if(a&1&&(t(0,"div",15)(1,"h4",35),s(2," Resumen de actividad "),i(),t(3,"div",36)(4,"div",37)(5,"div",38),s(6),i(),t(7,"div",39),s(8,"Pedidos"),i()(),t(9,"div",37)(10,"div",38),s(11),i(),t(12,"div",39),s(13,"Favoritos"),i()()()()),a&2){let e=l();r(6),d(" ",e.estadisticas.total_pedidos," "),r(5),d(" ",e.estadisticas.total_favoritos," ")}}var L=class a{usuario=null;estadisticas=null;seccionActiva="dashboard";notificacionesNoLeidas=0;esMobile=!1;seccionSeleccionada=new T;inicialUsuario=_(()=>{let n=this.usuario?.name;return n?n.charAt(0).toUpperCase():"U"});menuItems=_(()=>[{id:"dashboard",titulo:"Dashboard",icono:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5a2 2 0 012-2h0a2 2 0 012 2v0H8v0z"></path>',ruta:"/mi-cuenta/dashboard",activo:this.seccionActiva==="dashboard",descripcion:"Resumen de tu actividad"},{id:"pedidos",titulo:"Mis Pedidos",icono:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>',ruta:"/mi-cuenta/pedidos",activo:this.seccionActiva==="pedidos",descripcion:"Historial de compras",badge:this.estadisticas?.pedidos_pendientes},{id:"favoritos",titulo:"Mis Favoritos",icono:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>',ruta:"/mi-cuenta/favoritos",activo:this.seccionActiva==="favoritos",descripcion:"Productos guardados",badge:this.estadisticas?.total_favoritos},{id:"direcciones",titulo:"Mis Direcciones",icono:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>',ruta:"/mi-cuenta/direcciones",activo:this.seccionActiva==="direcciones",descripcion:"Administrar direcciones",badge:this.estadisticas?.total_direcciones},{id:"notificaciones",titulo:"Notificaciones",icono:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-5-5V9a4 4 0 00-8 0v3l-5 5h5m0 0v1a2 2 0 002 2h2a2 2 0 002-2v-1"></path>',ruta:"/mi-cuenta/notificaciones",activo:this.seccionActiva==="notificaciones",descripcion:"Mensajes y alertas",badge:this.notificacionesNoLeidas},{id:"configuracion",titulo:"Configuraci\xF3n",icono:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>',ruta:"/mi-cuenta/configuracion",activo:this.seccionActiva==="configuracion",descripcion:"Preferencias de cuenta"}]);seleccionarItem(n){this.seccionSeleccionada.emit(n.id)}cerrarSesion(){console.log("\u{1F6AA} Cerrando sesi\xF3n...")}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=w({type:a,selectors:[["app-menu-cuenta"]],inputs:{usuario:"usuario",estadisticas:"estadisticas",seccionActiva:"seccionActiva",notificacionesNoLeidas:"notificacionesNoLeidas",esMobile:"esMobile"},outputs:{seccionSeleccionada:"seccionSeleccionada"},standalone:!0,features:[E],decls:24,vars:6,consts:[[1,"bg-white","rounded-lg","shadow-sm","border","border-gray-200","overflow-hidden"],[1,"p-6","bg-gradient-to-r","from-blue-600","to-purple-600","text-white"],[1,"flex","items-center","space-x-4"],[1,"relative"],[1,"w-16","h-16","bg-white","bg-opacity-20","rounded-full","flex","items-center","justify-center","backdrop-blur-sm"],[1,"w-full","h-full","rounded-full","object-cover",3,"src","alt"],[1,"text-2xl","font-bold","text-white"],[1,"absolute","bottom-0","right-0","w-4","h-4","bg-green-400","rounded-full","border-2","border-white"],[1,"flex-1","min-w-0"],[1,"text-lg","font-semibold","text-white","truncate"],[1,"text-blue-100","text-sm","truncate"],[1,"flex","items-center","mt-1"],[1,"mt-4","grid","grid-cols-2","gap-3"],["role","navigation","aria-label","Navegaci\xF3n de cuenta",1,"py-2"],["type","button",1,"w-full","flex","items-center","px-6","py-3","text-left","transition-all","duration-200","group","hover:bg-gray-50","focus:outline-none","focus:bg-gray-50",3,"bg-blue-50","border-r-3","border-blue-600"],[1,"px-6","py-4","bg-gray-50","border-t"],[1,"p-4","border-t","bg-gray-50"],["type","button",1,"w-full","flex","items-center","justify-center","px-4","py-2","text-sm","font-medium","text-red-600","bg-white","border","border-red-300","rounded-lg","hover:bg-red-50","hover:border-red-400","transition-colors","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:ring-offset-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4","text-blue-200","mr-1"],["d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-blue-100","text-xs"],[1,"bg-white","bg-opacity-10","rounded-lg","p-3","backdrop-blur-sm"],["type","button",1,"w-full","flex","items-center","px-6","py-3","text-left","transition-all","duration-200","group","hover:bg-gray-50","focus:outline-none","focus:bg-gray-50",3,"click"],[1,"flex-shrink-0","mr-3"],[1,"w-8","h-8","rounded-lg","flex","items-center","justify-center","transition-colors"],[1,"w-5","h-5",3,"innerHTML"],[1,"flex","items-center","justify-between"],[1,"font-medium","transition-colors"],[1,"bg-red-500","text-white","text-xs","font-medium","px-2","py-1","rounded-full","min-w-[20px]","text-center"],[1,"text-sm","text-gray-500","mt-1","group-hover:text-gray-600","transition-colors"],[1,"flex-shrink-0","ml-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","transition-colors"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"text-sm","font-medium","text-gray-900","mb-3"],[1,"grid","grid-cols-2","gap-3"],[1,"text-center"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-xs","text-gray-500"]],template:function(e,o){e&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),m(5,W,1,2,"img",5)(6,X,2,1,"span",6),i(),u(7,"div",7),i(),t(8,"div",8)(9,"h3",9),s(10),i(),t(11,"p",10),s(12),i(),m(13,Y,5,1,"div",11),i()(),m(14,Z,11,2,"div",12),i(),t(15,"nav",13),V(16,ne,11,28,"button",14,Q),i(),m(18,oe,14,2,"div",15),t(19,"div",16)(20,"button",17),f("click",function(){return o.cerrarSesion()}),v(),t(21,"svg",18),u(22,"path",19),i(),s(23," Cerrar sesi\xF3n "),i()()()),e&2&&(r(5),p(o.usuario!=null&&o.usuario.profile_image?5:6),r(5),d(" ",(o.usuario==null?null:o.usuario.name)||"Usuario"," "),r(2),d(" ",(o.usuario==null?null:o.usuario.email)||"email@ejemplo.com"," "),r(),p(o.estadisticas!=null&&o.estadisticas.total_pedidos?13:-1),r(),p(!o.esMobile&&o.estadisticas?14:-1),r(2),P(o.menuItems()),r(2),p(o.esMobile&&o.estadisticas?18:-1))},dependencies:[A,U],styles:[".border-r-3[_ngcontent-%COMP%]{border-right-width:3px}button[_ngcontent-%COMP%]{transition:all .2s cubic-bezier(.4,0,.2,1)}button[_ngcontent-%COMP%]:hover   .group-hover\\:bg-gray-100[_ngcontent-%COMP%]{background-color:#f3f4f6}button[_ngcontent-%COMP%]:focus{outline:2px solid transparent;outline-offset:2px;box-shadow:0 0 0 2px #3b82f6}"]})};function ae(a,n){if(a&1&&(t(0,"span",16),s(1),i()),a&2){let e=l();r(),d(" ",e.notificacionesNoLeidas()>99?"99+":e.notificacionesNoLeidas()," ")}}function re(a,n){if(a&1){let e=k();t(0,"div",32),f("click",function(){b(e);let c=l();return x(c.cerrarMenuMovil())}),t(1,"div",33),f("click",function(c){return b(e),x(c.stopPropagation())}),t(2,"div",34)(3,"h2",11),s(4,"Mi Cuenta"),i(),t(5,"button",35),f("click",function(){b(e);let c=l();return x(c.cerrarMenuMovil())}),v(),t(6,"svg",6),u(7,"path",36),i()()(),g(),t(8,"div",37)(9,"app-menu-cuenta",38),f("seccionSeleccionada",function(c){b(e);let C=l();return x(C.navegarASeccionMovil(c))}),i()()()()}if(a&2){let e=l();r(9),h("usuario",e.usuarioActual())("estadisticas",e.estadisticasActuales())("seccionActiva",e.seccionActual())("notificacionesNoLeidas",e.notificacionesNoLeidas())("esMobile",!0)}}var q=class a{cuentaUsuarioService=M($);authService=M(B);router=M(R);activatedRoute=M(H);seccionActual=y("dashboard");menuMovilAbierto=y(!1);usuarioActual=y(null);dashboardData=_(()=>this.cuentaUsuarioService.dashboardData());estadisticasActuales=_(()=>this.cuentaUsuarioService.estadisticasData());notificacionesNoLeidas=y(0);ngOnInit(){this.verificarAutenticacion(),this.inicializarUsuario(),this.cargarDashboard(),this.escucharCambiosDeRuta(),this.cargarNotificacionesNoLeidas()}verificarAutenticacion(){this.authService.isAuthenticated()||this.router.navigate(["/auth/login"],{queryParams:{returnUrl:"/mi-cuenta"}})}inicializarUsuario(){this.usuarioActual.set(this.authService.currentUser())}cargarDashboard(){this.cuentaUsuarioService.getDashboard().subscribe({next:n=>{n.status==="success"&&console.log("\u2705 Dashboard cargado correctamente:",n.data)},error:n=>{console.error("\u274C Error cargando dashboard:",n)}})}cargarNotificacionesNoLeidas(){this.cuentaUsuarioService.getNotificacionesNoLeidasCount().subscribe(n=>{this.notificacionesNoLeidas.set(n)})}escucharCambiosDeRuta(){this.router.events.pipe(I(o=>o instanceof F)).subscribe(()=>{let o=this.router.url,c=this.extraerSeccionDeUrl(o);this.seccionActual.set(c)});let n=this.router.url,e=this.extraerSeccionDeUrl(n);this.seccionActual.set(e)}extraerSeccionDeUrl(n){let e=n.split("/"),o=e.findIndex(c=>c==="mi-cuenta");return o!==-1&&e[o+1]?e[o+1]:"dashboard"}navegarASeccion(n){this.seccionActual.set(n),this.router.navigate(["/mi-cuenta",n])}navegarASeccionMovil(n){this.navegarASeccion(n),this.cerrarMenuMovil()}toggleMobileMenu(){this.menuMovilAbierto.update(n=>!n)}cerrarMenuMovil(){this.menuMovilAbierto.set(!1)}recargarDatos(){this.cuentaUsuarioService.refreshAllData().subscribe({next:()=>{console.log("\u2705 Datos recargados correctamente")},error:n=>{console.error("\u274C Error al recargar datos:",n)}})}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=w({type:a,selectors:[["app-cuenta-usuario"]],standalone:!0,features:[E],decls:41,vars:9,consts:[[1,"min-h-screen","bg-gray-50"],[1,"lg:hidden","bg-white","shadow-sm","border-b","sticky","top-0","z-40"],[1,"px-4","py-3"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","space-x-3"],["type","button","aria-label","Abrir men\xFA",1,"p-2","rounded-lg","hover:bg-gray-100","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16M4 18h16"],[1,"flex","items-center","space-x-2"],[1,"w-8","h-8","bg-gradient-to-br","from-blue-500","to-purple-600","rounded-full","flex","items-center","justify-center"],[1,"text-white","text-sm","font-semibold"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-sm","text-gray-500","capitalize"],[1,"relative"],["type","button","aria-label","Notificaciones",1,"p-2","rounded-lg","hover:bg-gray-100","transition-colors","relative"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 17h5l-5-5V9a4 4 0 00-8 0v3l-5 5h5m0 0v1a2 2 0 002 2h2a2 2 0 002-2v-1"],[1,"absolute","-top-1","-right-1","bg-red-500","text-white","text-xs","rounded-full","w-5","h-5","flex","items-center","justify-center","font-medium"],[1,"max-w-7xl","mx-auto","lg:px-8"],[1,"lg:grid","lg:grid-cols-12","lg:gap-8"],[1,"hidden","lg:block","lg:col-span-4","xl:col-span-3"],[1,"sticky","top-8"],[3,"seccionSeleccionada","usuario","estadisticas","seccionActiva","notificacionesNoLeidas"],[1,"lg:hidden","fixed","inset-0","z-50","bg-black","bg-opacity-50"],[1,"lg:col-span-8","xl:col-span-9"],[1,"px-4","lg:px-0","py-6","lg:py-8"],["aria-label","Breadcrumb",1,"hidden","lg:flex","mb-6"],[1,"flex","items-center","space-x-2","text-sm"],["routerLink","/",1,"text-gray-500","hover:text-gray-700","transition-colors"],[1,"flex","items-center"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4","text-gray-400","mx-2"],["fill-rule","evenodd","d","M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule","evenodd"],[1,"text-gray-900","font-medium","capitalize"],[1,"lg:hidden","fixed","inset-0","z-50","bg-black","bg-opacity-50",3,"click"],[1,"fixed","inset-y-0","left-0","w-80","bg-white","shadow-xl","transform","transition-transform","duration-300",3,"click"],[1,"flex","items-center","justify-between","px-4","py-4","border-b"],["type","button","aria-label","Cerrar men\xFA",1,"p-2","rounded-lg","hover:bg-gray-100","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"flex-1","overflow-y-auto","py-4"],[3,"seccionSeleccionada","usuario","estadisticas","seccionActiva","notificacionesNoLeidas","esMobile"]],template:function(e,o){if(e&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"button",5),f("click",function(){return o.toggleMobileMenu()}),v(),t(6,"svg",6),u(7,"path",7),i()(),g(),t(8,"div",8)(9,"div",9)(10,"span",10),s(11),i()(),t(12,"div")(13,"h1",11),s(14,"Mi Cuenta"),i(),t(15,"p",12),s(16),i()()()(),t(17,"div",13)(18,"button",14),v(),t(19,"svg",6),u(20,"path",15),i(),m(21,ae,2,1,"span",16),i()()()()(),g(),t(22,"div",17)(23,"div",18)(24,"div",19)(25,"div",20)(26,"app-menu-cuenta",21),f("seccionSeleccionada",function(C){return o.navegarASeccion(C)}),i()()(),m(27,re,10,5,"div",22),t(28,"main",23)(29,"div",24)(30,"nav",25)(31,"ol",26)(32,"li")(33,"a",27),s(34," Inicio "),i()(),t(35,"li",28),v(),t(36,"svg",29),u(37,"path",30),i(),g(),t(38,"span",31),s(39),i()()()(),u(40,"router-outlet"),i()()()()()),e&2){let c;r(11),d(" ",((c=(c=o.usuarioActual())==null?null:c.name)!==null&&c!==void 0?c:"Usuario").charAt(0).toUpperCase()," "),r(5),d(" ",o.seccionActual()," "),r(5),p(o.notificacionesNoLeidas()>0?21:-1),r(5),h("usuario",o.usuarioActual())("estadisticas",o.estadisticasActuales())("seccionActiva",o.seccionActual())("notificacionesNoLeidas",o.notificacionesNoLeidas()),r(),p(o.menuMovilAbierto()?27:-1),r(12),z(o.seccionActual())}},dependencies:[A,U,O,G,L],styles:[".transition-transform[_ngcontent-%COMP%]{transition:transform .3s ease-in-out}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f5f9}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:2px}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#94a3b8}"]})};export{q as CuentaUsuarioComponent};
