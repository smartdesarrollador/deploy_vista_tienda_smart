import{b as oe,c as Le,d as ae,e as ne,h as re,i as se,k as le,l as ce,m as He,n as de,o as ue,p as Ne,r as j,s as Ge,t as U}from"./chunk-LAOM3VFB.js";import{a as $e}from"./chunk-7UZTSUC5.js";import{a as De}from"./chunk-6WUTALT2.js";import{A as z,Aa as S,Ba as C,Ca as Oe,Da as ke,G as m,H as p,I as b,Ia as $,J as A,N as T,S as Ee,V as X,Va as v,Xa as Z,Y as s,Z as Pe,ba as x,c as Q,cb as L,d as xe,da as f,db as Te,f as k,fa as y,fb as Re,g as we,gb as he,h as Se,ha as I,hb as Ve,ja as D,k as N,l as K,la as u,ma as ve,n as J,na as be,oa as B,p as G,pa as E,q as te,qa as n,r as W,ra as r,s as M,sa as g,ta as h,tb as ze,ua as _,v as Be,va as l,vb as ie,wa as Ae,xa as Me,ya as Fe,yb as Ie,z as F,za as d}from"./chunk-A4STRE5Y.js";import{a as O,b as H,e as ee}from"./chunk-6MDQTQU3.js";var Y=class o{http=F(Ve);platformId=F(Ee);isBrowser=Te(this.platformId);API_URL=`${De.apiUrl}/busqueda`;CACHE_KEY="busqueda_cache";HISTORIAL_KEY="busqueda_historial";get httpOptions(){return{headers:new Re({"Content-Type":"application/json",Accept:"application/json"})}}configuracion={cache_duracion_minutos:15,autocompletado_debounce_ms:300,max_sugerencias:10,min_caracteres_busqueda:2,max_resultados_autocompletado:8,guardar_historial:!0,max_historial_items:50,filtros_inteligentes:!0,busqueda_fuzzy:!0};_ultimaBusqueda=x(null);_ultimaBusquedaAvanzada=x(null);_autocompletado=x(null);_terminosPopulares=x([]);_filtrosDisponibles=x(null);_estadisticas=x(null);_historial=x({items:[],total:0,terminos_frecuentes:[],ultima_actualizacion:new Date().toISOString()});_preferencias=x({categorias_favoritas:[],marcas_favoritas:[],rango_precio_preferido:{min:0,max:1e4},ordenamiento_preferido:"relevancia",filtros_automaticos:!0,sugerencias_personalizadas:!0,historial_limitado:!1});_notificaciones=x([]);_cargando=x(!1);_cargandoAutocompletado=x(!1);_error=x(null);_terminoActual=x("");_filtrosActivos=x([]);_ordenamientoActual=x("relevancia");cache=new Map;terminoBusqueda$=new xe("");eventosBusqueda$=new xe(null);ultimaBusqueda=this._ultimaBusqueda.asReadonly();ultimaBusquedaAvanzada=this._ultimaBusquedaAvanzada.asReadonly();autocompletado=this._autocompletado.asReadonly();terminosPopulares=this._terminosPopulares.asReadonly();filtrosDisponibles=this._filtrosDisponibles.asReadonly();estadisticas=this._estadisticas.asReadonly();historial=this._historial.asReadonly();preferencias=this._preferencias.asReadonly();notificaciones=this._notificaciones.asReadonly();cargando=this._cargando.asReadonly();cargandoAutocompletado=this._cargandoAutocompletado.asReadonly();error=this._error.asReadonly();terminoActual=this._terminoActual.asReadonly();filtrosActivos=this._filtrosActivos.asReadonly();ordenamientoActual=this._ordenamientoActual.asReadonly();productos=v(()=>{let e=this._ultimaBusqueda(),t=this._ultimaBusquedaAvanzada();return e?.data?.productos||t?.data?.productos||[]});totalResultados=v(()=>{let e=this._ultimaBusqueda(),t=this._ultimaBusquedaAvanzada();return e?.data?.total_resultados||t?.data?.total_resultados||0});paginacion=v(()=>{let e=this._ultimaBusqueda(),t=this._ultimaBusquedaAvanzada();return e?.data?.pagination||t?.data?.pagination||null});tieneResultados=v(()=>this.totalResultados()>0);sugerencias=v(()=>this._ultimaBusqueda()?.data?.sugerencias||[]);estadoBusqueda=v(()=>{let e=this._ultimaBusqueda(),t=this._ultimaBusquedaAvanzada(),i=this.productos(),a=this.paginacion();return{termino_actual:this._terminoActual(),filtros_aplicados:{},resultados_total:this.totalResultados(),productos_cargados:i,pagina_actual:a?.current_page||1,ordenamiento_actual:this._ordenamientoActual(),cargando:this._cargando(),tiene_mas_resultados:a?a.current_page<a.last_page:!1,ultima_busqueda:e?.data?.tiempo_busqueda||""}});terminosFrecuentes=v(()=>this._historial().terminos_frecuentes.slice(0,10));hayFiltrosActivos=v(()=>this._filtrosActivos().length>0);resumenBusqueda=v(()=>{let e=this._terminoActual(),t=this.totalResultados(),i=this._filtrosActivos(),a=this.estadoBusqueda().ultima_busqueda;return{termino:e,total_resultados:t,filtros_activos:i.length,tiempo_busqueda:a,tiene_resultados:t>0}});utilBusqueda={limpiarTermino:e=>this.limpiarTermino(e),validarTermino:e=>this.validarTermino(e),generarSlug:e=>this.generarSlug(e),destacarTermino:(e,t)=>this.destacarTermino(e,t),calcularRelevancia:(e,t)=>this.calcularRelevancia(e,t),extraerPalabrasClave:e=>this.extraerPalabrasClave(e),detectarIntencion:e=>this.detectarIntencion(e),corregirOrtografia:e=>this.corregirOrtografia(e),calcularSimilitud:(e,t)=>this.calcularSimilitud(e,t),filtrarPalabrasClave:e=>this.filtrarPalabrasClave(e),formatearPrecio:e=>this.formatearPrecio(e),generarHashBusqueda:e=>this.generarHashBusqueda(e)};constructor(){this.isBrowser&&(this.cargarDesdeStorage(),this.inicializar(),this.configurarAutocompletado(),setInterval(()=>{this.limpiarCacheExpirado()},6e4))}buscar(e){this._cargando.set(!0),this._error.set(null);let t=this.limpiarTermino(e.q);if(!this.validarTermino(t)){let q={success:!1,message:"T\xE9rmino de b\xFAsqueda inv\xE1lido",data:{productos:[],pagination:{current_page:1,last_page:1,per_page:12,total:0},termino_busqueda:t,total_resultados:0,sugerencias:[],tiempo_busqueda:"0ms"}};return this._cargando.set(!1),k(q)}let i=H(O({},e),{q:t});this._terminoActual.set(t);let a=this.generarHashBusqueda(i),c=this.obtenerDeCache(a);if(c&&!this.esCacheExpirado(c))return k(c.datos).pipe(M(q=>{this._ultimaBusqueda.set(q),this.actualizarHistorial(i,q)}));let P=new he;return Object.entries(i).forEach(([q,w])=>{w!=null&&(P=P.set(q,w.toString()))}),this.http.get(`${this.API_URL}`,H(O({},this.httpOptions),{params:P})).pipe(M(q=>{q.success&&(this._ultimaBusqueda.set(q),this.guardarEnCache(a,q,"busqueda",{termino:t}),this.actualizarHistorial(i,q),this.emitirEvento({tipo:"busqueda_realizada",data:{termino:t,resultados:q.data.total_resultados,tiempo:q.data.tiempo_busqueda},timestamp:new Date}))}),N(q=>(this._error.set("Error al realizar la b\xFAsqueda"),this.manejarErrorOffline(a))),M(()=>this._cargando.set(!1)),G(1))}busquedaAvanzada(e){this._cargando.set(!0),this._error.set(null),e.termino&&(e.termino=this.limpiarTermino(e.termino),this._terminoActual.set(e.termino));let t=this.generarHashBusqueda(e),i=this.obtenerDeCache(t);return i&&!this.esCacheExpirado(i)?k(i.datos).pipe(M(a=>{this._ultimaBusquedaAvanzada.set(a),this.actualizarFiltrosAplicados(e)})):this.http.post(`${this.API_URL}/avanzada`,e,this.httpOptions).pipe(M(a=>{a.success&&(this._ultimaBusquedaAvanzada.set(a),this.guardarEnCache(t,a,"busqueda",{termino:e.termino,filtros:e}),this.actualizarFiltrosAplicados(e),this.emitirEvento({tipo:"busqueda_realizada",data:{tipo:"avanzada",termino:e.termino,filtros:Object.keys(e).filter(c=>e[c]!==void 0).length,resultados:a.data.total_resultados},timestamp:new Date}))}),N(a=>(this._error.set("Error al realizar la b\xFAsqueda avanzada"),this.manejarErrorOffline(t))),M(()=>this._cargando.set(!1)),G(1))}autocompletar(e){this.terminoBusqueda$.next(e)}obtenerTerminosPopulares(){let e="terminos_populares",t=this.obtenerDeCache(e);return t&&!this.esCacheExpirado(t)?k(t.datos).pipe(M(i=>{i.success&&this._terminosPopulares.set(i.data.map(a=>a.termino).slice(0,10))})):this.http.get(`${this.API_URL}/terminos-populares`,this.httpOptions).pipe(M(i=>{i.success&&(this._terminosPopulares.set(i.data.map(a=>a.termino).slice(0,10)),this.guardarEnCache(e,i,"terminos"))}),N(i=>(this._error.set("Error al obtener t\xE9rminos populares"),this.manejarErrorOffline(e))),G(1))}obtenerFiltrosDisponibles(){let e="filtros_disponibles",t=this.obtenerDeCache(e);return t&&!this.esCacheExpirado(t)?k(t.datos).pipe(M(i=>{this._filtrosDisponibles.set(i.data)})):this.http.get(`${this.API_URL}/filtros-disponibles`,this.httpOptions).pipe(M(i=>{i.success&&(this._filtrosDisponibles.set(i.data),this.guardarEnCache(e,i,"filtros"))}),N(i=>(this._error.set("Error al obtener filtros disponibles"),this.manejarErrorOffline(e))),G(1))}obtenerEstadisticas(){let e="estadisticas_busqueda",t=this.obtenerDeCache(e);return t&&!this.esCacheExpirado(t)?k(t.datos).pipe(M(i=>{this._estadisticas.set(i.data)})):this.http.get(`${this.API_URL}/estadisticas`,this.httpOptions).pipe(M(i=>{i.success&&(this._estadisticas.set(i.data),this.guardarEnCache(e,i,"estadisticas"))}),N(i=>(this._error.set("Error al obtener estad\xEDsticas"),this.manejarErrorOffline(e))),G(1))}aplicarFiltro(e){let t=this._filtrosActivos(),i=t.find(c=>c.campo===e.campo),a;i?a=t.map(c=>c.campo===e.campo?H(O({},e),{activo:!0}):c):a=[...t,H(O({},e),{activo:!0})],this._filtrosActivos.set(a),this.emitirEvento({tipo:"filtro_aplicado",data:{filtro:e,total_filtros:a.length},timestamp:new Date})}removerFiltro(e){let i=this._filtrosActivos().filter(a=>a.campo!==e);this._filtrosActivos.set(i),this.emitirEvento({tipo:"filtro_aplicado",data:{filtro_removido:e,total_filtros:i.length},timestamp:new Date})}limpiarFiltros(){this._filtrosActivos.set([]),this.emitirEvento({tipo:"filtro_aplicado",data:{accion:"limpiar_todos"},timestamp:new Date})}cambiarOrdenamiento(e){this._ordenamientoActual.set(e),this.emitirEvento({tipo:"ordenamiento_cambiado",data:{nuevo_ordenamiento:e},timestamp:new Date})}obtenerHistorial(){return this._historial()}limpiarHistorial(){let e={items:[],total:0,terminos_frecuentes:[],ultima_actualizacion:new Date().toISOString()};this._historial.set(e),this.guardarHistorialEnStorage(),this.emitirEvento({tipo:"historial_actualizado",data:{accion:"limpiar"},timestamp:new Date})}removerDeHistorial(e){let t=this._historial(),i=t.items.filter(c=>c.id!==e),a=H(O({},t),{items:i,total:i.length,ultima_actualizacion:new Date().toISOString()});this._historial.set(a),this.guardarHistorialEnStorage()}limpiarTermino(e){return e.trim().toLowerCase().replace(/[^\w\sáéíóúñü]/gi,"").replace(/\s+/g," ")}validarTermino(e){return e.length>=this.configuracion.min_caracteres_busqueda&&e.length<=100&&!/^\s*$/.test(e)}generarSlug(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}destacarTermino(e,t){let i=new RegExp(`(${t})`,"gi");return e.replace(i,"<mark>$1</mark>")}calcularRelevancia(e,t){let i=0,a=t.toLowerCase();return e.nombre.toLowerCase().includes(a)&&(i+=50),e.marca.toLowerCase().includes(a)&&(i+=30),e.descripcion?.toLowerCase().includes(a)&&(i+=20),e.comentarios_avg_calificacion&&(i+=e.comentarios_avg_calificacion*2),i}extraerPalabrasClave(e){return e.toLowerCase().split(/\s+/).filter(t=>t.length>2).slice(0,10)}detectarIntencion(e){let t=e.toLowerCase();return t.includes("precio")||t.includes("barato")?"precio":t.includes("comparar")||t.includes("vs")?"comparacion":t.includes("marca")?"marca":t.includes("categoria")?"categoria":"producto"}corregirOrtografia(e){let t={telefono:"tel\xE9fono",computadora:"computadora",audifono:"aud\xEDfono",camara:"c\xE1mara"},i=e;return Object.entries(t).forEach(([a,c])=>{i=i.replace(new RegExp(a,"gi"),c)}),i}calcularSimilitud(e,t){let i=e.toLowerCase(),a=t.toLowerCase();if(i.length===0)return a.length;if(a.length===0)return i.length;let c=Array(a.length+1).fill(null).map(()=>Array(i.length+1).fill(null));for(let w=0;w<=i.length;w+=1)c[0][w]=w;for(let w=0;w<=a.length;w+=1)c[w][0]=w;for(let w=1;w<=a.length;w+=1)for(let V=1;V<=i.length;V+=1){let R=i[V-1]===a[w-1]?0:1;c[w][V]=Math.min(c[w][V-1]+1,c[w-1][V]+1,c[w-1][V-1]+R)}let P=c[a.length][i.length],q=Math.max(i.length,a.length);return(q-P)/q*100}filtrarPalabrasClave(e){let t=["el","la","de","que","y","a","en","un","es","se","no","te","lo","le","da","su","por","son","con","para","del"];return e.filter(i=>!t.includes(i))}formatearPrecio(e){return new Intl.NumberFormat("es-PE",{style:"currency",currency:"PEN"}).format(e)}generarHashBusqueda(e){let t=JSON.stringify(e),i=0;for(let a=0;a<t.length;a++){let c=t.charCodeAt(a);i=(i<<5)-i+c,i=i&i}return Math.abs(i).toString(36)}guardarEnCache(e,t,i,a){if(this.isBrowser)try{let c={key:e,datos:t,timestamp:Date.now(),expira_en:Date.now()+this.configuracion.cache_duracion_minutos*60*1e3,tipo:i,metadatos:a};this.cache.set(e,c),this.guardarCacheEnStorage()}catch(c){console.warn("Error al guardar cache de b\xFAsqueda:",c)}}obtenerDeCache(e){return this.cache.get(e)||null}esCacheExpirado(e){return Date.now()>e.expira_en}limpiarCacheExpirado(){let e=Date.now();for(let[t,i]of this.cache.entries())e>i.expira_en&&this.cache.delete(t);this.guardarCacheEnStorage()}cargarDesdeStorage(){try{let e=localStorage.getItem(this.CACHE_KEY);if(e){let i=JSON.parse(e);Object.entries(i).forEach(([a,c])=>{this.cache.set(a,c)})}let t=localStorage.getItem(this.HISTORIAL_KEY);if(t){let i=JSON.parse(t);this._historial.set(i)}}catch(e){console.warn("Error al cargar datos de storage:",e)}}guardarCacheEnStorage(){if(this.isBrowser)try{let e=Object.fromEntries(this.cache);localStorage.setItem(this.CACHE_KEY,JSON.stringify(e))}catch(e){console.warn("Error al guardar cache:",e)}}guardarHistorialEnStorage(){if(this.isBrowser)try{let e=this._historial();localStorage.setItem(this.HISTORIAL_KEY,JSON.stringify(e))}catch(e){console.warn("Error al guardar historial:",e)}}manejarErrorOffline(e){let t=this.obtenerDeCache(e);return t?k(t.datos):we(()=>new Error("No hay datos disponibles offline"))}emitirEvento(e){this.eventosBusqueda$.next(e)}configurarAutocompletado(){this.terminoBusqueda$.pipe(K(this.configuracion.autocompletado_debounce_ms),J(),te(e=>{if(e.length<this.configuracion.min_caracteres_busqueda||!this.validarTermino(e))return k(null);this._cargandoAutocompletado.set(!0);let t=`autocompletado_${e}`,i=this.obtenerDeCache(t);if(i&&!this.esCacheExpirado(i))return k(i.datos);let a=new he().set("q",e);return this.http.get(`${this.API_URL}/autocompletar`,H(O({},this.httpOptions),{params:a})).pipe(M(c=>{c.success&&this.guardarEnCache(t,c,"autocompletado",{termino:e})}),N(()=>{let c={success:!0,data:{productos:[],categorias:[],marcas:[],busquedas_populares:this._terminosPopulares().slice(0,3),termino:e}};return k(c)}))})).subscribe(e=>{this._cargandoAutocompletado.set(!1),e&&(this._autocompletado.set(e),this.emitirEvento({tipo:"autocompletado_usado",data:{termino:e.data.termino,resultados:{productos:e.data.productos.length,categorias:e.data.categorias.length,marcas:e.data.marcas.length}},timestamp:new Date}))})}actualizarHistorial(e,t){if(!this.configuracion.guardar_historial)return;let i=this._historial(),a={id:Date.now().toString(),termino:e.q,resultados_total:t.data.total_resultados,fecha:new Date().toISOString(),tiempo_busqueda:parseFloat(t.data.tiempo_busqueda.replace("ms",""))},c=i.items.filter(R=>R.termino!==e.q||Date.now()-new Date(R.fecha).getTime()>6e4);c.unshift(a);let P=c.slice(0,this.configuracion.max_historial_items),q=new Map;P.forEach(R=>{let fe=q.get(R.termino)||0;q.set(R.termino,fe+1)});let w=Array.from(q.entries()).sort(([,R],[,fe])=>fe-R).slice(0,10).map(([R])=>R),V={items:P,total:P.length,terminos_frecuentes:w,ultima_actualizacion:new Date().toISOString()};this._historial.set(V),this.guardarHistorialEnStorage(),this.emitirEvento({tipo:"historial_actualizado",data:{nuevo_elemento:a},timestamp:new Date})}actualizarFiltrosAplicados(e){let t=[];if(e.categorias?.length&&t.push({tipo:"categoria",campo:"categorias",valor:e.categorias,label:`Categor\xEDas (${e.categorias.length})`,activo:!0}),e.marcas?.length&&t.push({tipo:"marca",campo:"marcas",valor:e.marcas,label:`Marcas (${e.marcas.length})`,activo:!0}),e.precio_min!==void 0||e.precio_max!==void 0){let i=`Precio: ${e.precio_min?this.formatearPrecio(e.precio_min):"Min"} - ${e.precio_max?this.formatearPrecio(e.precio_max):"Max"}`;t.push({tipo:"precio",campo:"precio",valor:{min:e.precio_min,max:e.precio_max},label:i,activo:!0})}e.con_descuento&&t.push({tipo:"descuento",campo:"con_descuento",valor:!0,label:"Con descuento",activo:!0}),e.en_stock&&t.push({tipo:"stock",campo:"en_stock",valor:!0,label:"En stock",activo:!0}),e.calificacion_min&&t.push({tipo:"calificacion",campo:"calificacion_min",valor:e.calificacion_min,label:`Calificaci\xF3n m\xEDn: ${e.calificacion_min}\u2B50`,activo:!0}),this._filtrosActivos.set(t)}inicializar(){this.obtenerTerminosPopulares().subscribe(),this.obtenerFiltrosDisponibles().subscribe()}limpiarCache(){this.cache.clear(),this.isBrowser&&localStorage.removeItem(this.CACHE_KEY),this.emitirEvento({tipo:"cache_actualizado",data:{accion:"limpiar"},timestamp:new Date})}repetirUltimaBusqueda(){let e=this._historial();if(e.items.length===0)return null;let i={q:e.items[0].termino};return this.buscar(i)}get eventos$(){return this.eventosBusqueda$.asObservable()}get configuracionActual(){return O({},this.configuracion)}actualizarPreferencias(e){let t=this._preferencias(),i=O(O({},t),e);this._preferencias.set(i),this.isBrowser&&localStorage.setItem("busqueda_preferencias",JSON.stringify(i))}buscarProductoPorId(e){return this.productos().find(i=>i.id===e)||null}obtenerProductosRelacionados(e){let t=this.buscarProductoPorId(e);if(!t)return k([]);let i={marcas:[t.marca],page:1,per_page:6};return this.busquedaAvanzada(i).pipe(Se(a=>a.success?a.data.productos.filter(c=>c.id!==e):[]))}static \u0275fac=function(t){return new(t||o)};static \u0275prov=Be({token:o,factory:o.\u0275fac,providedIn:"root"})};var Qe=["inputBusqueda"],ye=(o,e)=>e.id,Ke=(o,e)=>e.label;function Je(o,e){if(o&1&&(n(0,"option",6),d(1),r()),o&2){let t=e.$implicit;y("value",t.id),s(),C(" ",t.nombre," ")}}function We(o,e){if(o&1){let t=h();n(0,"button",21),_("click",function(){m(t);let a=l();return p(a.limpiarFormulario())}),b(),n(1,"svg",22),g(2,"path",23),r()()}}function Xe(o,e){o&1&&(n(0,"div",25)(1,"div",26),g(2,"div",27),n(3,"span",28),d(4,"Buscando..."),r()()())}function Ze(o,e){if(o&1&&g(0,"img",33),o&2){let t=l().$implicit;y("src",t.imagen_principal,X)("alt",t.nombre)}}function et(o,e){o&1&&(n(0,"div",34),b(),n(1,"svg",8),g(2,"path",40),r()())}function tt(o,e){if(o&1){let t=h();n(0,"button",32),_("click",function(){let a=m(t).$implicit,c=l(4);return p(c.testClick(a))})("mousedown",function(){let a=m(t).$implicit,c=l(4);return p(c.testClick(a))}),f(1,Ze,1,2,"img",33)(2,et,3,0,"div",34),n(3,"div",35)(4,"p",36),d(5),r(),n(6,"p",37),d(7),r()(),n(8,"div",38)(9,"p",39),d(10),r()()()}if(o&2){let t=e.$implicit,i=e.$index,a=l(4);D(a.indiceBusquedaSeleccionado()===i?"bg-blue-50":"hover:bg-gray-50"),s(),u(t.imagen_principal?1:2),s(4),C(" ",t.nombre," "),s(2),S(t.marca),s(3),C(" ",a.formatearPrecio(t.precio)," ")}}function it(o,e){if(o&1&&(n(0,"div",29)(1,"div",30),d(2," Productos "),r(),B(3,tt,11,6,"button",31,ye),r()),o&2){let t=l(3);s(3),E(t.productosAutocompletado())}}function ot(o,e){if(o&1){let t=h();n(0,"button",41),_("click",function(){let a=m(t).$implicit,c=l(4);return p(c.seleccionarCategoriaAutocompletado(a))}),n(1,"div",42),b(),n(2,"svg",43),g(3,"path",44),r()(),A(),n(4,"div",45)(5,"p",46),d(6),r(),n(7,"p",47),d(8,"Categor\xEDa"),r()()()}if(o&2){let t=e.$implicit,i=e.$index,a=l(4);D(a.indiceBusquedaSeleccionado()===a.productosAutocompletado().length+i?"bg-blue-50":"hover:bg-gray-50"),s(6),C(" ",t.nombre," ")}}function at(o,e){if(o&1&&(n(0,"div",29)(1,"div",30),d(2," Categor\xEDas "),r(),B(3,ot,9,3,"button",31,ye),r()),o&2){let t=l(3);s(3),E(t.categoriasAutocompletado())}}function nt(o,e){if(o&1){let t=h();n(0,"button",41),_("click",function(){let a=m(t).$implicit,c=l(4);return p(c.seleccionarMarcaAutocompletado(a))}),n(1,"div",48),b(),n(2,"svg",49),g(3,"path",50),r()(),A(),n(4,"div",45)(5,"p",46),d(6),r(),n(7,"p",47),d(8,"Marca"),r()()()}if(o&2){let t=e.$implicit,i=e.$index,a=l(4);D(a.indiceBusquedaSeleccionado()===a.productosAutocompletado().length+a.categoriasAutocompletado().length+i?"bg-blue-50":"hover:bg-gray-50"),s(6),S(t)}}function rt(o,e){if(o&1&&(n(0,"div",29)(1,"div",30),d(2," Marcas "),r(),B(3,nt,9,3,"button",31,be),r()),o&2){let t=l(3);s(3),E(t.marcasAutocompletado())}}function st(o,e){if(o&1){let t=h();n(0,"button",41),_("click",function(){let a=m(t).$implicit,c=l(4);return p(c.seleccionarBusquedaPopular(a))}),n(1,"div",51),b(),n(2,"svg",52),g(3,"path",53),r()(),A(),n(4,"div",45)(5,"p",46),d(6),r(),n(7,"p",47),d(8,"B\xFAsqueda popular"),r()()()}if(o&2){let t=e.$implicit,i=e.$index,a=l(4);D(a.indiceBusquedaSeleccionado()===a.productosAutocompletado().length+a.categoriasAutocompletado().length+a.marcasAutocompletado().length+i?"bg-blue-50":"hover:bg-gray-50"),s(6),S(t)}}function lt(o,e){if(o&1&&(n(0,"div")(1,"div",30),d(2," B\xFAsquedas populares "),r(),B(3,st,9,3,"button",31,be),r()),o&2){let t=l(3);s(3),E(t.busquedasPopulares())}}function ct(o,e){if(o&1&&f(0,it,5,0,"div",29)(1,at,5,0,"div",29)(2,rt,5,0,"div",29)(3,lt,5,0,"div"),o&2){let t=l(2);u(t.productosAutocompletado().length>0?0:-1),s(),u(t.categoriasAutocompletado().length>0?1:-1),s(),u(t.marcasAutocompletado().length>0?2:-1),s(),u(t.busquedasPopulares().length>0?3:-1)}}function dt(o,e){if(o&1){let t=h();n(0,"div",24),_("mousedown",function(a){return m(t),p(a.preventDefault())}),f(1,Xe,5,0,"div",25)(2,ct,4,4),r()}if(o&2){let t=l();s(),u(t.cargandoAutocompletado()?1:2)}}function ut(o,e){o&1&&g(0,"div",19)}function mt(o,e){if(o&1){let t=h();n(0,"button",62),_("click",function(){let a=m(t).$implicit,c=l(2);return p(c.seleccionarRangoPrecio(a))}),d(1),r()}if(o&2){let t=e.$implicit;s(),C(" ",t.label," ")}}function pt(o,e){if(o&1&&(n(0,"span",66),b(),n(1,"svg",69),g(2,"path",44),r(),d(3),r()),o&2){let t=l(3);s(3),C(" ",t.textoCategoria()," ")}}function _t(o,e){if(o&1&&(n(0,"span",67),b(),n(1,"svg",69),g(2,"path",70)(3,"path",71),r(),d(4),r()),o&2){let t=l(3);s(4),C(" ",t.textoRangoPrecios()," ")}}function gt(o,e){if(o&1){let t=h();n(0,"div",61)(1,"div",63)(2,"div",64)(3,"span",65),d(4,"Filtros aplicados:"),r(),f(5,pt,4,1,"span",66)(6,_t,5,1,"span",67),r(),n(7,"button",68),_("click",function(){m(t);let a=l(2);return p(a.limpiarRangoPrecios())}),d(8," Limpiar filtros "),r()()()}if(o&2){let t=l(2);s(5),u(t.textoCategoria()?5:-1),s(),u(t.textoRangoPrecios()?6:-1)}}function ft(o,e){if(o&1&&(n(0,"div",20)(1,"div",54)(2,"div")(3,"label",55),d(4," Precio m\xEDnimo "),r(),n(5,"div",11)(6,"span",56),d(7,"S/"),r(),g(8,"input",57),r()(),n(9,"div")(10,"label",55),d(11," Precio m\xE1ximo "),r(),n(12,"div",11)(13,"span",56),d(14,"S/"),r(),g(15,"input",58),r()(),n(16,"div")(17,"label",55),d(18," Rangos populares "),r(),n(19,"div",59),B(20,mt,2,1,"button",60,Ke),r()()(),f(22,gt,9,2,"div",61),r()),o&2){let t=l();s(20),E(t.rangosPrecioPopulares()),s(2),u(t.tieneFiltrosAplicados()?22:-1)}}var pe=class o{fb=F(j);busquedaService=F(Y);router=F(ie);destroy$=new Q;inputBusqueda;categorias=[];terminoInicial="";categoriaInicial=null;placeholder="Buscar productos, marcas, categor\xEDas...";mostrarFiltrosRapidos=!0;autocompletadoHabilitado=!0;buscar=new T;terminoCambiado=new T;autocompletadoSeleccionado=new T;productoSeleccionado=new T;mostrarAutocompletado=x(!1);cargandoAutocompletado=x(!1);indiceBusquedaSeleccionado=x(-1);mostrarFiltrosAvanzados=x(!1);rangosPrecioPopulares=x([{min:0,max:50,label:"Hasta S/ 50"},{min:50,max:100,label:"S/ 50 - S/ 100"},{min:100,max:200,label:"S/ 100 - S/ 200"},{min:200,max:500,label:"S/ 200 - S/ 500"},{min:500,max:1e3,label:"S/ 500 - S/ 1000"},{min:1e3,max:Number.MAX_SAFE_INTEGER,label:"M\xE1s de S/ 1000"}]);autocompletado=v(()=>this.busquedaService.autocompletado());productosAutocompletado=v(()=>this.autocompletado()?.data?.productos||[]);categoriasAutocompletado=v(()=>this.autocompletado()?.data?.categorias||[]);marcasAutocompletado=v(()=>this.autocompletado()?.data?.marcas||[]);busquedasPopulares=v(()=>this.autocompletado()?.data?.busquedas_populares||[]);busquedaForm=this.fb.group({termino:["",[Le.minLength(2)]],categoria:[null],precio_min:[null],precio_max:[null]});terminoBusqueda$=new Q;constructor(){this.configurarAutocompletado(),Z(()=>{this.terminoInicial&&this.busquedaForm.patchValue({termino:this.terminoInicial},{emitEvent:!1}),this.categoriaInicial&&this.busquedaForm.patchValue({categoria:this.categoriaInicial},{emitEvent:!1})})}ngOnInit(){this.inicializarComponente()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}inicializarComponente(){this.busquedaForm.get("termino")?.valueChanges.pipe(W(this.destroy$),K(300),J()).subscribe(e=>{e&&e.length>=2?(this.terminoBusqueda$.next(e),this.terminoCambiado.emit(e)):this.ocultarAutocompletado()}),this.configurarEventosTeclado()}configurarAutocompletado(){this.autocompletadoHabilitado&&this.terminoBusqueda$.pipe(W(this.destroy$),K(300),J(),te(e=>e&&e.length>=2?(this.cargandoAutocompletado.set(!0),this.busquedaService.autocompletar(e),new Promise(t=>setTimeout(t,500))):[])).subscribe(()=>{this.cargandoAutocompletado.set(!1),this.mostrarAutocompletado.set(!0)})}configurarEventosTeclado(){this.inputBusqueda.nativeElement.addEventListener("keydown",e=>{if(!this.mostrarAutocompletado())return;let t=this.obtenerTotalOpcionesAutocompletado();switch(e.key){case"ArrowDown":e.preventDefault(),this.indiceBusquedaSeleccionado.update(a=>a<t-1?a+1:0);break;case"ArrowUp":e.preventDefault(),this.indiceBusquedaSeleccionado.update(a=>a>0?a-1:t-1);break;case"Enter":e.preventDefault();let i=this.indiceBusquedaSeleccionado();i>=0?this.seleccionarOpcionAutocompletado(i):this.realizarBusqueda();break;case"Escape":this.ocultarAutocompletado();break}})}obtenerTotalOpcionesAutocompletado(){return this.productosAutocompletado().length+this.categoriasAutocompletado().length+this.marcasAutocompletado().length+this.busquedasPopulares().length}seleccionarOpcionAutocompletado(e){let t=0;if(e<this.productosAutocompletado().length){let i=this.productosAutocompletado()[e];this.seleccionarProductoAutocompletado(i);return}if(t+=this.productosAutocompletado().length,e<t+this.categoriasAutocompletado().length){let i=this.categoriasAutocompletado()[e-t];this.seleccionarCategoriaAutocompletado(i);return}if(t+=this.categoriasAutocompletado().length,e<t+this.marcasAutocompletado().length){let i=this.marcasAutocompletado()[e-t];this.seleccionarMarcaAutocompletado(i);return}if(t+=this.marcasAutocompletado().length,e<t+this.busquedasPopulares().length){let i=this.busquedasPopulares()[e-t];this.seleccionarBusquedaPopular(i);return}}onFocusInput(){let e=this.busquedaForm.get("termino")?.value;e&&e.length>=2&&this.mostrarAutocompletado.set(!0)}onBlurInput(){setTimeout(()=>{this.ocultarAutocompletado()},300)}onCategoriaChange(e){if(console.log("\u{1F504} [DROPDOWN] Cambio de categor\xEDa detectado:",e),e&&e!=="null"&&e!==""){let t=parseInt(e,10);isNaN(t)||(console.log("\u2705 [DROPDOWN] Navegando a categor\xEDa ID:",t),this.navegarACategoria(t))}}ocultarAutocompletado(){this.mostrarAutocompletado.set(!1),this.indiceBusquedaSeleccionado.set(-1)}testClick(e){console.log("\u{1F9EA} [TEST] Click detectado en:",e.nombre),this.seleccionarProductoAutocompletado(e)}seleccionarProductoAutocompletado(e){console.log("\u{1F50D} [BARRA-BUSQUEDA] Producto seleccionado:",e.nombre,"ID:",e.id),this.ocultarAutocompletado(),this.productoSeleccionado.emit(e),this.navegarAProducto(e)}navegarAProducto(e){console.log("\u{1F680} [BARRA-BUSQUEDA] Navegando a producto ID:",e.id),console.log("\u{1F680} [BARRA-BUSQUEDA] Ruta:",["/producto",e.id.toString()]),this.router.navigate(["/producto",e.id.toString()]).then(t=>{console.log("\u2705 [BARRA-BUSQUEDA] Navegaci\xF3n exitosa:",t)},t=>{console.error("\u274C [BARRA-BUSQUEDA] Error en navegaci\xF3n:",t)})}generarSlug(e,t){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-").replace(/-+/g,"-").concat(`-${t}`)}navegarACategoria(e){let t=this.categorias.find(i=>i.id===e);if(t){let i=t.slug||e.toString();this.router.navigate(["/productos-por-categoria",i])}}seleccionarCategoriaAutocompletado(e){this.ocultarAutocompletado(),this.autocompletadoSeleccionado.emit(e.nombre),this.navegarACategoria(e.id)}seleccionarMarcaAutocompletado(e){this.busquedaForm.patchValue({termino:e}),this.autocompletadoSeleccionado.emit(e),this.ocultarAutocompletado(),this.realizarBusqueda()}seleccionarBusquedaPopular(e){this.busquedaForm.patchValue({termino:e}),this.autocompletadoSeleccionado.emit(e),this.ocultarAutocompletado(),this.realizarBusqueda()}seleccionarRangoPrecio(e){let t=e.max===Number.MAX_SAFE_INTEGER?null:e.max;this.busquedaForm.patchValue({precio_min:e.min,precio_max:t}),this.realizarBusqueda()}limpiarRangoPrecios(){this.busquedaForm.patchValue({precio_min:null,precio_max:null}),this.realizarBusqueda()}toggleFiltrosAvanzados(){this.mostrarFiltrosAvanzados.update(e=>!e)}realizarBusqueda(){let e=this.busquedaForm.value;if(!e.termino&&!e.categoria)return;let t={q:e.termino||"",categoria:e.categoria||void 0,precio_min:e.precio_min||void 0,precio_max:e.precio_max||void 0,page:1};this.buscar.emit(t),this.inputBusqueda.nativeElement.blur()}onSubmit(){this.busquedaForm.valid&&this.realizarBusqueda()}limpiarFormulario(){this.busquedaForm.reset(),this.inputBusqueda.nativeElement.focus()}tieneFiltrosAplicados=v(()=>{let e=this.busquedaForm.value;return!!(e.categoria||e.precio_min||e.precio_max)});textoCategoria=v(()=>{let e=this.busquedaForm.get("categoria")?.value;if(!e)return"";let t=this.categorias.find(i=>i.id===e);return t?t.nombre:""});textoRangoPrecios=v(()=>{let e=this.busquedaForm.value,t=e.precio_min,i=e.precio_max;return!t&&!i?"":t&&!i?`Desde S/ ${t}`:!t&&i?`Hasta S/ ${i}`:`S/ ${t} - S/ ${i}`});formatearPrecio(e){return new Intl.NumberFormat("es-PE",{style:"currency",currency:"PEN",minimumFractionDigits:0}).format(e)}get f(){return this.busquedaForm.controls}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=z({type:o,selectors:[["app-barra-busqueda-avanzada"]],viewQuery:function(t,i){if(t&1&&Ae(Qe,7),t&2){let a;Me(a=Fe())&&(i.inputBusqueda=a.first)}},inputs:{categorias:"categorias",terminoInicial:"terminoInicial",categoriaInicial:"categoriaInicial",placeholder:"placeholder",mostrarFiltrosRapidos:"mostrarFiltrosRapidos",autocompletadoHabilitado:"autocompletadoHabilitado"},outputs:{buscar:"buscar",terminoCambiado:"terminoCambiado",autocompletadoSeleccionado:"autocompletadoSeleccionado",productoSeleccionado:"productoSeleccionado"},standalone:!0,features:[$],decls:23,vars:8,consts:[["inputBusqueda",""],[1,"w-full",3,"ngSubmit","formGroup"],[1,"flex","flex-col","lg:flex-row","gap-4"],[1,"relative","lg:w-64"],["formControlName","categoria",1,"w-full","px-4","py-3","pr-10","text-gray-900","bg-white","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","appearance-none","cursor-pointer","hover:border-gray-400","transition-colors","duration-200",3,"change"],[3,"value"],[1,"cursor-pointer","hover:bg-gray-50",3,"value"],[1,"absolute","inset-y-0","right-0","flex","items-center","px-2","pointer-events-none"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5","text-gray-400"],["fill-rule","evenodd","d","M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule","evenodd"],[1,"flex-1","relative"],[1,"relative"],[1,"flex","rounded-lg","border","border-gray-300","focus-within:ring-2","focus-within:ring-blue-500","focus-within:border-blue-500"],["type","text","formControlName","termino",1,"flex-1","px-4","py-3","text-gray-900","placeholder-gray-500","bg-transparent","border-none","rounded-l-lg","focus:outline-none",3,"focus","blur","placeholder"],["type","button",1,"px-3","text-gray-400","hover:text-gray-600","transition-colors","duration-200"],["type","submit",1,"px-6","py-3","bg-blue-600","text-white","rounded-r-lg","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","disabled:opacity-50","disabled:cursor-not-allowed","transition-colors","duration-200",3,"disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],[1,"absolute","top-full","left-0","right-0","z-50","mt-1","bg-white","border","border-gray-300","rounded-lg","shadow-lg","max-h-96","overflow-y-auto"],[1,"flex","flex-col","sm:flex-row","gap-3"],[1,"mt-4","p-4","bg-gray-50","rounded-lg","border","border-gray-200","animate-fade-in-up"],["type","button",1,"px-3","text-gray-400","hover:text-gray-600","transition-colors","duration-200",3,"click"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5"],["fill-rule","evenodd","d","M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule","evenodd"],[1,"absolute","top-full","left-0","right-0","z-50","mt-1","bg-white","border","border-gray-300","rounded-lg","shadow-lg","max-h-96","overflow-y-auto",3,"mousedown"],[1,"p-4","text-center"],[1,"flex","items-center","justify-center","gap-2"],[1,"animate-spin","rounded-full","h-4","w-4","border-b-2","border-blue-600"],[1,"text-sm","text-gray-600"],[1,"border-b","border-gray-100"],[1,"px-4","py-2","text-xs","font-semibold","text-gray-500","uppercase","tracking-wider","bg-gray-50"],["type","button",1,"w-full","px-4","py-3","text-left","flex","items-center","gap-3","transition-colors","duration-150",3,"class"],["type","button",1,"w-full","px-4","py-3","text-left","flex","items-center","gap-3","transition-colors","duration-150",3,"click","mousedown"],[1,"w-10","h-10","object-cover","rounded-lg","bg-gray-100",3,"src","alt"],[1,"w-10","h-10","bg-gray-200","rounded-lg","flex","items-center","justify-center"],[1,"flex-1","min-w-0"],[1,"text-sm","font-medium","text-gray-900","truncate"],[1,"text-sm","text-gray-500"],[1,"text-right"],[1,"text-sm","font-semibold","text-gray-900"],["fill-rule","evenodd","d","M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z","clip-rule","evenodd"],["type","button",1,"w-full","px-4","py-3","text-left","flex","items-center","gap-3","transition-colors","duration-150",3,"click"],[1,"w-10","h-10","bg-blue-100","rounded-lg","flex","items-center","justify-center"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5","text-blue-600"],["d","M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM2 11a2 2 0 012-2h12a2 2 0 012 2v4a2 2 0 01-2 2H4a2 2 0 01-2-2v-4z"],[1,"flex-1"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-xs","text-gray-500"],[1,"w-10","h-10","bg-green-100","rounded-lg","flex","items-center","justify-center"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5","text-green-600"],["fill-rule","evenodd","d","M10 2L3 7v11a1 1 0 001 1h12a1 1 0 001-1V7l-7-5zM10 1a1 1 0 00-.7.3l-7 5A1 1 0 002 7v11a3 3 0 003 3h10a3 3 0 003-3V7a1 1 0 00-.3-.7l-7-5A1 1 0 0010 1z","clip-rule","evenodd"],[1,"w-10","h-10","bg-purple-100","rounded-lg","flex","items-center","justify-center"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5","text-purple-600"],["fill-rule","evenodd","d","M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule","evenodd"],[1,"grid","grid-cols-1","md:grid-cols-2","xl:grid-cols-3","gap-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"absolute","left-3","top-1/2","transform","-translate-y-1/2","text-gray-500"],["type","number","formControlName","precio_min","placeholder","0","min","0",1,"w-full","pl-8","pr-4","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500"],["type","number","formControlName","precio_max","placeholder","Sin l\xEDmite","min","0",1,"w-full","pl-8","pr-4","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500"],[1,"flex","flex-wrap","gap-2"],["type","button",1,"px-3","py-1.5","text-sm","bg-white","border","border-gray-300","rounded-full","hover:bg-blue-50","hover:border-blue-300","hover:text-blue-700","transition-colors","duration-200"],[1,"mt-4","pt-4","border-t","border-gray-300"],["type","button",1,"px-3","py-1.5","text-sm","bg-white","border","border-gray-300","rounded-full","hover:bg-blue-50","hover:border-blue-300","hover:text-blue-700","transition-colors","duration-200",3,"click"],[1,"flex","items-center","justify-between","flex-wrap","gap-3"],[1,"flex","items-center","gap-3","flex-wrap"],[1,"text-sm","font-medium","text-gray-700"],[1,"inline-flex","items-center","gap-1","px-3","py-1","bg-blue-100","text-blue-800","rounded-full","text-sm"],[1,"inline-flex","items-center","gap-1","px-3","py-1","bg-green-100","text-green-800","rounded-full","text-sm"],["type","button",1,"text-sm","text-red-600","hover:text-red-800","underline",3,"click"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4"],["d","M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.511-1.31c-.563-.649-1.413-1.076-2.354-1.253V5z","clip-rule","evenodd"]],template:function(t,i){if(t&1){let a=h();n(0,"form",1),_("ngSubmit",function(){return m(a),p(i.onSubmit())}),n(1,"div",2)(2,"div",3)(3,"select",4),_("change",function(P){return m(a),p(i.onCategoriaChange(P.target.value))}),n(4,"option",5),d(5,"Todas las categor\xEDas"),r(),B(6,Je,2,2,"option",6,ye),r(),n(8,"div",7),b(),n(9,"svg",8),g(10,"path",9),r()()(),A(),n(11,"div",10)(12,"div",11)(13,"div",12)(14,"input",13,0),_("focus",function(){return m(a),p(i.onFocusInput())})("blur",function(){return m(a),p(i.onBlurInput())}),r(),f(16,We,3,0,"button",14),n(17,"button",15),b(),n(18,"svg",16),g(19,"path",17),r()()(),f(20,dt,3,1,"div",18),r()(),f(21,ut,1,0,"div",19),r(),f(22,ft,23,1,"div",20),r()}if(t&2){let a;y("formGroup",i.busquedaForm),s(4),y("value",null),s(2),E(i.categorias),s(8),y("placeholder",i.placeholder),s(2),u((a=i.busquedaForm.get("termino"))!=null&&a.value?16:-1),s(),y("disabled",i.busquedaForm.invalid),s(3),u(i.mostrarAutocompletado()&&i.autocompletadoHabilitado?20:-1),s(),u(i.mostrarFiltrosRapidos?21:-1),s(),u(i.mostrarFiltrosAvanzados()?22:-1)}},dependencies:[L,U,re,de,ue,oe,se,He,ae,ne,Ne,le,ce],styles:['.barra-busqueda-container[_ngcontent-%COMP%]{position:relative;width:100%}.input-busqueda[_ngcontent-%COMP%]{transition:all .3s ease;border:2px solid #e5e7eb}.input-busqueda[_ngcontent-%COMP%]:focus{border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a;transform:translateY(-1px)}.boton-busqueda[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#1d4ed8);transition:all .3s ease;position:relative;overflow:hidden}.boton-busqueda[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#2563eb,#1e40af);transform:translateY(-1px);box-shadow:0 4px 12px #3b82f666}.boton-busqueda[_ngcontent-%COMP%]:active{transform:translateY(0)}.boton-busqueda[_ngcontent-%COMP%]:disabled{background:#9ca3af;cursor:not-allowed;transform:none;box-shadow:none}.boton-busqueda[_ngcontent-%COMP%]:after{content:"";position:absolute;top:50%;left:50%;width:0;height:0;border-radius:50%;background:#ffffff4d;transform:translate(-50%,-50%);transition:width .3s,height .3s}.boton-busqueda[_ngcontent-%COMP%]:active:after{width:100px;height:100px}.autocompletado-panel[_ngcontent-%COMP%]{background:#fff;border:1px solid #e5e7eb;border-radius:12px;box-shadow:0 10px 25px -3px #0000001a,0 4px 6px -2px #0000000d;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);animation:_ngcontent-%COMP%_slideDown .2s ease-out;z-index:1000}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.autocompletado-item[_ngcontent-%COMP%]{transition:all .15s ease;border-radius:8px;margin:0 8px}.autocompletado-item[_ngcontent-%COMP%]:hover{background:#f8fafc;transform:translate(4px)}.autocompletado-item.selected[_ngcontent-%COMP%]{background:#eff6ff;border-left:4px solid #3b82f6}.selector-categoria[_ngcontent-%COMP%]{position:relative;background:#fff;border:2px solid #e5e7eb;border-radius:12px;transition:all .3s ease}.selector-categoria[_ngcontent-%COMP%]:focus-within{border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a;transform:translateY(-1px)}.selector-categoria[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{appearance:none;background:transparent;border:none;outline:none;cursor:pointer!important;padding-right:2.5rem}select[formControlName=categoria][_ngcontent-%COMP%], select[formControlName=categoria][_ngcontent-%COMP%]:hover{cursor:pointer!important}select[formControlName=categoria][_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{cursor:pointer!important;padding:8px 12px}select[formControlName=categoria][_ngcontent-%COMP%]   option[_ngcontent-%COMP%]:hover{background-color:#f3f4f6!important;cursor:pointer!important}.dropdown-icon[_ngcontent-%COMP%]{position:absolute;right:.75rem;top:50%;transform:translateY(-50%);pointer-events:none;transition:transform .2s ease}.selector-categoria[_ngcontent-%COMP%]:focus-within   .dropdown-icon[_ngcontent-%COMP%]{transform:translateY(-50%) rotate(180deg)}.filtros-toggle[_ngcontent-%COMP%]{transition:all .3s ease;position:relative;overflow:hidden}.filtros-toggle[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #00000026}.filtros-toggle.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#1d4ed8);color:#fff}.filtros-avanzados[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_expandDown .3s ease-out;transform-origin:top}@keyframes _ngcontent-%COMP%_expandDown{0%{opacity:0;transform:scaleY(.95) translateY(-10px)}to{opacity:1;transform:scaleY(1) translateY(0)}}.precio-input[_ngcontent-%COMP%]{border:2px solid #e5e7eb;border-radius:8px;transition:all .2s ease;position:relative}.precio-input[_ngcontent-%COMP%]:focus{border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.currency-symbol[_ngcontent-%COMP%]{position:absolute;left:.75rem;top:50%;transform:translateY(-50%);color:#6b7280;font-weight:500;pointer-events:none}.rango-precio-btn[_ngcontent-%COMP%]{border:2px solid #e5e7eb;border-radius:9999px;transition:all .2s ease;position:relative;overflow:hidden}.rango-precio-btn[_ngcontent-%COMP%]:hover{border-color:#3b82f6;background:#eff6ff;color:#1d4ed8;transform:translateY(-1px)}.rango-precio-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.filtro-aplicado[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dbeafe,#bfdbfe);border:1px solid #93c5fd;color:#1e40af;border-radius:9999px;padding:.25rem .75rem;font-size:.875rem;font-weight:500;display:inline-flex;align-items:center;gap:.25rem;animation:_ngcontent-%COMP%_fadeInScale .2s ease-out}@keyframes _ngcontent-%COMP%_fadeInScale{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}.badge-filtros[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626);color:#fff;border-radius:50%;min-width:1.25rem;height:1.25rem;display:flex;align-items:center;justify-content:center;font-size:.75rem;font-weight:600;animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.7}}.loading-dots[_ngcontent-%COMP%]{display:inline-flex;gap:.25rem}.loading-dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:.5rem;height:.5rem;border-radius:50%;background:#3b82f6;animation:_ngcontent-%COMP%_loadingDots 1.4s infinite ease-in-out}.loading-dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){animation-delay:-.32s}.loading-dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){animation-delay:-.16s}@keyframes _ngcontent-%COMP%_loadingDots{0%,80%,to{transform:scale(.8);opacity:.5}40%{transform:scale(1);opacity:1}}.loading-spinner[_ngcontent-%COMP%]{border:2px solid #e5e7eb;border-top:2px solid #3b82f6;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.barra-busqueda-container[_ngcontent-%COMP%]{padding:0}.filtros-avanzados[_ngcontent-%COMP%]{margin:0 -1rem;border-radius:0}.autocompletado-panel[_ngcontent-%COMP%]{margin:0 -1rem;border-radius:0;border-left:none;border-right:none}}.focus-visible[_ngcontent-%COMP%]:focus{outline:2px solid #3b82f6;outline-offset:2px}@media (prefers-contrast: high){.input-busqueda[_ngcontent-%COMP%], .selector-categoria[_ngcontent-%COMP%], .precio-input[_ngcontent-%COMP%]{border-width:3px}.boton-busqueda[_ngcontent-%COMP%]{border:2px solid #1e40af}}@media (prefers-reduced-motion: reduce){*[_ngcontent-%COMP%], [_ngcontent-%COMP%]:before, [_ngcontent-%COMP%]:after{animation-delay:-1ms!important;animation-duration:1ms!important;animation-iteration-count:1!important;background-attachment:initial!important;scroll-behavior:auto!important;transition-duration:0s!important;transition-delay:0s!important}}.text-truncate-2[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.glass-effect[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background:#ffffffe6}.hover-lift[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.hover-scale[_ngcontent-%COMP%]:hover{transform:scale(1.02)}']})};var Ue=(o,e)=>e.id;function xt(o,e){if(o&1&&g(0,"img",6),o&2){let t=l().$implicit;y("src",t.imagen_principal,X)("alt",t.nombre)}}function vt(o,e){o&1&&(n(0,"div",7),b(),n(1,"svg",20),g(2,"path",21),r()())}function bt(o,e){if(o&1&&(n(0,"div",8),d(1),r()),o&2){let t=l().$implicit,i=l(2);s(),C(" -",i.calcularDescuento(t.precio_oferta,t.precio),"% ")}}function ht(o,e){o&1&&(n(0,"div",9)(1,"span",22),d(2,"AGOTADO"),r()())}function Ct(o,e){if(o&1&&(n(0,"p",12),d(1),r()),o&2){let t=l().$implicit;s(),C(" ",t.descripcion," ")}}function yt(o,e){o&1&&(b(),n(0,"svg",25),g(1,"path",28),r())}function qt(o,e){o&1&&(b(),n(0,"svg",26)(1,"defs")(2,"linearGradient",29),g(3,"stop",30)(4,"stop",31),r()(),g(5,"path",32),r())}function wt(o,e){o&1&&(b(),n(0,"svg",27),g(1,"path",28),r())}function St(o,e){if(o&1&&f(0,yt,2,0,":svg:svg",25)(1,qt,6,0,":svg:svg",26)(2,wt,2,0,":svg:svg",27),o&2){let t=e.$implicit;u(t.llena?0:t.media?1:2)}}function Bt(o,e){if(o&1&&(n(0,"div",13)(1,"div",23),B(2,St,3,1,null,null,ve),r(),n(4,"span",24),d(5),r()()),o&2){let t=l().$implicit,i=l(2);s(2),E(i.generarEstrellas(t.comentarios_avg_calificacion)),s(3),C(" (",t.comentarios_count||0,") ")}}function Et(o,e){if(o&1&&(n(0,"span",16),d(1),r(),n(2,"span",33),d(3),r()),o&2){let t=l().$implicit,i=l(2);s(),S(i.formatearPrecio(t.precio_oferta)),s(2),S(i.formatearPrecio(t.precio))}}function Pt(o,e){if(o&1&&(n(0,"span",16),d(1),r()),o&2){let t=l().$implicit,i=l(2);s(),S(i.formatearPrecio(t.precio))}}function At(o,e){o&1&&(n(0,"div",17),d(1,"Disponible"),r())}function Mt(o,e){o&1&&(n(0,"div",18),d(1,"Agotado"),r())}function Ft(o,e){if(o&1&&(n(0,"span"),d(1),r()),o&2){let t=l(2).$implicit;s(),S(t.categoria)}}function Ot(o,e){o&1&&(n(0,"span"),d(1," \xB7 "),r())}function kt(o,e){if(o&1&&(n(0,"span"),d(1),r()),o&2){let t=l(2).$implicit;s(),S(t.marca)}}function Tt(o,e){if(o&1&&(n(0,"div",19),f(1,Ft,2,1,"span")(2,Ot,2,0,"span")(3,kt,2,1,"span"),r()),o&2){let t=l().$implicit;s(),u(t.categoria?1:-1),s(),u(t.categoria&&t.marca?2:-1),s(),u(t.marca?3:-1)}}function Rt(o,e){if(o&1){let t=h();n(0,"div",4),_("click",function(){let a=m(t).$implicit,c=l(2);return p(c.onProductoClick(a))}),n(1,"div",5),f(2,xt,1,2,"img",6)(3,vt,3,0,"div",7)(4,bt,2,1,"div",8)(5,ht,3,0,"div",9),r(),n(6,"div",10)(7,"h3",11),d(8),r(),f(9,Ct,2,1,"p",12)(10,Bt,6,1,"div",13),n(11,"div",14)(12,"div",15),f(13,Et,4,2)(14,Pt,2,1,"span",16),r(),f(15,At,2,0,"div",17)(16,Mt,2,0,"div",18),r(),f(17,Tt,4,3,"div",19),r()()}if(o&2){let t=e.$implicit,i=l(2);I("opacity-60",!i.estaDisponible(t)),s(2),u(t.imagen_principal?2:3),s(2),u(t.precio_oferta&&i.calcularDescuento(t.precio_oferta,t.precio)>0?4:-1),s(),u(i.estaDisponible(t)?-1:5),s(3),C(" ",t.nombre," "),s(),u(t.descripcion?9:-1),s(),u(t.comentarios_avg_calificacion&&t.comentarios_avg_calificacion>0?10:-1),s(3),u(t.precio_oferta&&t.precio_oferta<t.precio?13:14),s(2),u(i.estaDisponible(t)?15:16),s(2),u(t.categoria||t.marca?17:-1)}}function Vt(o,e){if(o&1&&(n(0,"div",0),B(1,Rt,18,11,"div",3,Ue),r()),o&2){let t=l();s(),E(t.productos)}}function zt(o,e){if(o&1&&g(0,"img",37),o&2){let t=l().$implicit;y("src",t.imagen_principal,X)("alt",t.nombre)}}function It(o,e){o&1&&(n(0,"div",7),b(),n(1,"svg",48),g(2,"path",21),r()())}function Dt(o,e){if(o&1&&(n(0,"div",8),d(1),r()),o&2){let t=l().$implicit,i=l(2);s(),C(" -",i.calcularDescuento(t.precio_oferta,t.precio),"% ")}}function $t(o,e){o&1&&(n(0,"div",9)(1,"span",49),d(2,"AGOTADO"),r()())}function Lt(o,e){if(o&1&&(n(0,"p",40),d(1),r()),o&2){let t=l().$implicit;s(),C(" ",t.descripcion," ")}}function Ht(o,e){if(o&1&&(n(0,"span"),d(1),r()),o&2){let t=l(2).$implicit;s(),S(t.categoria)}}function Nt(o,e){o&1&&(n(0,"span"),d(1," \xB7 "),r())}function Gt(o,e){if(o&1&&(n(0,"span"),d(1),r()),o&2){let t=l(2).$implicit;s(),S(t.marca)}}function jt(o,e){if(o&1&&(n(0,"div",41),f(1,Ht,2,1,"span")(2,Nt,2,0,"span")(3,Gt,2,1,"span"),r()),o&2){let t=l().$implicit;s(),u(t.categoria?1:-1),s(),u(t.categoria&&t.marca?2:-1),s(),u(t.marca?3:-1)}}function Ut(o,e){o&1&&(b(),n(0,"svg",51),g(1,"path",28),r())}function Yt(o,e){o&1&&(b(),n(0,"svg",52)(1,"defs")(2,"linearGradient",54),g(3,"stop",30)(4,"stop",31),r()(),g(5,"path",55),r())}function Qt(o,e){o&1&&(b(),n(0,"svg",53),g(1,"path",28),r())}function Kt(o,e){if(o&1&&f(0,Ut,2,0,":svg:svg",51)(1,Yt,6,0,":svg:svg",52)(2,Qt,2,0,":svg:svg",53),o&2){let t=e.$implicit;u(t.llena?0:t.media?1:2)}}function Jt(o,e){if(o&1&&(n(0,"div",42)(1,"div",23),B(2,Kt,3,1,null,null,ve),r(),n(4,"span",50),d(5),r()()),o&2){let t=l().$implicit,i=l(2);s(2),E(i.generarEstrellas(t.comentarios_avg_calificacion)),s(3),Oe(" ",t.comentarios_avg_calificacion==null?null:t.comentarios_avg_calificacion.toFixed(1)," (",t.comentarios_count||0,") ")}}function Wt(o,e){if(o&1&&(n(0,"span",44),d(1),r(),n(2,"span",33),d(3),r()),o&2){let t=l().$implicit,i=l(2);s(),S(i.formatearPrecio(t.precio_oferta)),s(2),S(i.formatearPrecio(t.precio))}}function Xt(o,e){if(o&1&&(n(0,"span",44),d(1),r()),o&2){let t=l().$implicit,i=l(2);s(),S(i.formatearPrecio(t.precio))}}function Zt(o,e){o&1&&(n(0,"div",45),d(1,"Disponible"),r())}function ei(o,e){o&1&&(n(0,"div",46),d(1,"Agotado"),r())}function ti(o,e){if(o&1){let t=h();n(0,"button",56),_("click",function(a){m(t);let c=l().$implicit,P=l(2);return a.stopPropagation(),p(P.onProductoClick(c))}),d(1," Ver detalles "),r()}}function ii(o,e){if(o&1){let t=h();n(0,"div",35),_("click",function(){let a=m(t).$implicit,c=l(2);return p(c.onProductoClick(a))}),n(1,"div",23)(2,"div",36),f(3,zt,1,2,"img",37)(4,It,3,0,"div",7)(5,Dt,2,1,"div",8)(6,$t,3,0,"div",9),r(),n(7,"div",38)(8,"div")(9,"h3",39),d(10),r(),f(11,Lt,2,1,"p",40)(12,jt,4,3,"div",41)(13,Jt,6,2,"div",42),r(),n(14,"div",43)(15,"div",14)(16,"div",15),f(17,Wt,4,2)(18,Xt,2,1,"span",44),r(),f(19,Zt,2,0,"div",45)(20,ei,2,0,"div",46),r(),f(21,ti,2,0,"button",47),r()()()()}if(o&2){let t=e.$implicit,i=l(2);I("opacity-60",!i.estaDisponible(t)),s(3),u(t.imagen_principal?3:4),s(2),u(t.precio_oferta&&i.calcularDescuento(t.precio_oferta,t.precio)>0?5:-1),s(),u(i.estaDisponible(t)?-1:6),s(4),C(" ",t.nombre," "),s(),u(t.descripcion?11:-1),s(),u(t.categoria||t.marca?12:-1),s(),u(t.comentarios_avg_calificacion&&t.comentarios_avg_calificacion>0?13:-1),s(4),u(t.precio_oferta&&t.precio_oferta<t.precio?17:18),s(2),u(i.estaDisponible(t)?19:20),s(2),u(i.estaDisponible(t)?21:-1)}}function oi(o,e){if(o&1&&(n(0,"div",1),B(1,ii,22,12,"div",34,Ue),r()),o&2){let t=l();s(),E(t.productos)}}function ai(o,e){o&1&&(n(0,"div",2)(1,"div",57),b(),n(2,"svg",58),g(3,"path",59),r()(),A(),n(4,"h3",60),d(5," No hay productos para mostrar "),r(),n(6,"p",61),d(7," Ajusta tus filtros de b\xFAsqueda para encontrar productos. "),r()())}var _e=class o{productos=[];vista="grid";cargandoMas=!1;seleccionarProducto=new T;cargarMas=new T;onProductoClick(e){this.seleccionarProducto.emit(e)}calcularDescuento(e,t){return!t||!e||t<=e?0:Math.round((t-e)/t*100)}generarEstrellas(e){let t=[];if(e===void 0)return[];let i=Math.floor(e),a=e%1>=.5;for(let c=0;c<5;c++)c<i?t.push({llena:!0,media:!1}):c===i&&a?t.push({llena:!1,media:!0}):t.push({llena:!1,media:!1});return t}formatearPrecio(e){return new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}getTextoStock(e){return e===0?{texto:"Agotado",clase:"text-red-600"}:e<=5?{texto:`\xDAltimas ${e} unidades`,clase:"text-orange-600"}:e<=10?{texto:"Stock limitado",clase:"text-yellow-600"}:{texto:"Disponible",clase:"text-green-600"}}estaDisponible(e){return e.activo}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=z({type:o,selectors:[["app-resultados-busqueda"]],inputs:{productos:"productos",vista:"vista",cargandoMas:"cargandoMas"},outputs:{seleccionarProducto:"seleccionarProducto",cargarMas:"cargarMas"},standalone:!0,features:[$],decls:3,vars:3,consts:[[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4","gap-6"],[1,"space-y-4"],[1,"text-center","py-12"],[1,"bg-white","border","border-gray-200","rounded-lg","overflow-hidden","hover:shadow-lg","transition-all","duration-300","cursor-pointer","group",3,"opacity-60"],[1,"bg-white","border","border-gray-200","rounded-lg","overflow-hidden","hover:shadow-lg","transition-all","duration-300","cursor-pointer","group",3,"click"],[1,"relative","aspect-square","overflow-hidden","bg-gray-100"],["loading","lazy",1,"w-full","h-full","object-cover","group-hover:scale-105","transition-transform","duration-300",3,"src","alt"],[1,"w-full","h-full","flex","items-center","justify-center","bg-gray-200"],[1,"absolute","top-2","left-2","bg-red-500","text-white","px-2","py-1","rounded-full","text-xs","font-semibold"],[1,"absolute","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center"],[1,"p-4"],[1,"text-sm","font-medium","text-gray-900","mb-2","line-clamp-2","group-hover:text-blue-600","transition-colors","duration-200"],[1,"text-xs","text-gray-600","mb-2","line-clamp-2"],[1,"flex","items-center","gap-1","mb-2"],[1,"space-y-1"],[1,"flex","items-baseline","gap-2"],[1,"text-lg","font-bold","text-gray-900"],[1,"text-xs","text-green-600"],[1,"text-xs","text-red-600"],[1,"mt-2","text-xs","text-gray-500"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"text-white","font-semibold"],[1,"flex"],[1,"text-xs","text-gray-500"],["viewBox","0 0 20 20",1,"w-3","h-3","text-yellow-400","fill-current"],["viewBox","0 0 20 20",1,"w-3","h-3","text-yellow-400"],["fill","currentColor","viewBox","0 0 20 20",1,"w-3","h-3","text-gray-300"],["d","M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"],["id","half-fill"],["offset","50%","stop-color","currentColor"],["offset","50%","stop-color","transparent"],["fill","url(#half-fill)","d","M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"],[1,"text-sm","text-gray-500","line-through"],[1,"bg-white","border","border-gray-200","rounded-lg","overflow-hidden","hover:shadow-lg","transition-all","duration-300","cursor-pointer",3,"opacity-60"],[1,"bg-white","border","border-gray-200","rounded-lg","overflow-hidden","hover:shadow-lg","transition-all","duration-300","cursor-pointer",3,"click"],[1,"flex-shrink-0","w-32","h-32","sm:w-40","sm:h-40","relative","bg-gray-100"],["loading","lazy",1,"w-full","h-full","object-cover",3,"src","alt"],[1,"flex-1","p-4","flex","flex-col","justify-between"],[1,"text-lg","font-medium","text-gray-900","mb-2","hover:text-blue-600","transition-colors","duration-200"],[1,"text-sm","text-gray-600","mb-3","line-clamp-2"],[1,"text-sm","text-gray-500","mb-2"],[1,"flex","items-center","gap-1","mb-3"],[1,"flex","items-end","justify-between"],[1,"text-xl","font-bold","text-gray-900"],[1,"text-sm","text-green-600"],[1,"text-sm","text-red-600"],[1,"px-4","py-2","bg-blue-600","text-white","text-sm","font-medium","rounded-lg","hover:bg-blue-700","transition-colors","duration-200","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-gray-400"],[1,"text-white","text-xs","font-semibold"],[1,"text-sm","text-gray-500"],["viewBox","0 0 20 20",1,"w-4","h-4","text-yellow-400","fill-current"],["viewBox","0 0 20 20",1,"w-4","h-4","text-yellow-400"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4","text-gray-300"],["id","half-fill-lista"],["fill","url(#half-fill-lista)","d","M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"],[1,"px-4","py-2","bg-blue-600","text-white","text-sm","font-medium","rounded-lg","hover:bg-blue-700","transition-colors","duration-200","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2",3,"click"],[1,"text-gray-400","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-16","h-16","mx-auto"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-gray-600"]],template:function(t,i){t&1&&f(0,Vt,3,0,"div",0)(1,oi,3,0,"div",1)(2,ai,8,0,"div",2),t&2&&(u(i.vista==="grid"?0:-1),s(),u(i.vista==="lista"?1:-1),s(),u(i.productos.length===0?2:-1))},dependencies:[L,Ie],styles:[".line-clamp-2[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.line-clamp-3[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.product-card[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.4,0,.2,1)}.product-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.product-image[_ngcontent-%COMP%]{transition:transform .3s ease}.product-card[_ngcontent-%COMP%]:hover   .product-image[_ngcontent-%COMP%]{transform:scale(1.05)}.discount-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626);box-shadow:0 2px 4px #ef444433}.stock-status[_ngcontent-%COMP%]{font-weight:500;font-size:.75rem}.star-rating[_ngcontent-%COMP%]{gap:1px}.star-filled[_ngcontent-%COMP%]{color:#fbbf24}.star-empty[_ngcontent-%COMP%]{color:#d1d5db}@media (max-width: 640px){.product-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:.75rem}.product-card[_ngcontent-%COMP%]{font-size:.875rem}.product-title[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem}.product-price[_ngcontent-%COMP%]{font-size:1rem}}.product-card[_ngcontent-%COMP%]:focus-visible{outline:2px solid #3b82f6;outline-offset:2px}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.image-skeleton[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f3f4f6 25%,#e5e7eb,#f3f4f6 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_loading 1.5s infinite}@keyframes _ngcontent-%COMP%_loading{0%{background-position:200% 0}to{background-position:-200% 0}}.list-view[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]{border-radius:.5rem}.list-view[_ngcontent-%COMP%]   .product-image-container[_ngcontent-%COMP%]{min-height:120px}@media (min-width: 640px){.list-view[_ngcontent-%COMP%]   .product-image-container[_ngcontent-%COMP%]{min-height:160px}}.action-button[_ngcontent-%COMP%]{transition:all .2s ease;transform:scale(1)}.action-button[_ngcontent-%COMP%]:hover{transform:scale(1.02);box-shadow:0 4px 12px #3b82f626}.action-button[_ngcontent-%COMP%]:active{transform:scale(.98)}.status-available[_ngcontent-%COMP%]{color:#059669}.status-limited[_ngcontent-%COMP%]{color:#d97706}.status-low[_ngcontent-%COMP%]{color:#ea580c}.status-out[_ngcontent-%COMP%]{color:#dc2626}@media (prefers-color-scheme: dark){.product-card[_ngcontent-%COMP%]{background-color:#1f2937;border-color:#374151}.product-title[_ngcontent-%COMP%]{color:#f9fafb}.product-description[_ngcontent-%COMP%]{color:#d1d5db}.product-price[_ngcontent-%COMP%]{color:#f9fafb}}"]})};var ni=(o,e)=>e.campo,qe=(o,e)=>e.valor;function ri(o,e){if(o&1){let t=h();n(0,"button",13),_("click",function(){m(t);let a=l();return p(a.onLimpiarTodos())}),d(1),r()}if(o&2){let t=l();s(),C(" Limpiar todos (",t.totalFiltrosActivos,") ")}}function si(o,e){if(o&1){let t=h();n(0,"div",11)(1,"form",14)(2,"div",15),g(3,"input",16)(4,"input",17),r(),n(5,"div",18)(6,"button",19),_("click",function(){m(t);let a=l();return p(a.aplicarRangoPrecio())}),d(7," Aplicar "),r(),n(8,"button",20),_("click",function(){m(t);let a=l();return p(a.limpiarPrecio())}),d(9," Limpiar "),r()()()()}if(o&2){let t=l();s(),y("formGroup",t.rangoPrecioForm)}}function li(o,e){if(o&1){let t=h();n(0,"label",21)(1,"input",22),_("change",function(a){let c=m(t).$implicit,P=l(2);return p(P.onSeleccionarCategoria(c.valor,a))}),r(),n(2,"span",23),d(3),r(),n(4,"span",24),d(5),r()()}if(o&2){let t=e.$implicit,i=l(2);s(),y("checked",i.estaActivo("categoria",t.valor)),s(2),C(" ",t.etiqueta," "),s(2),C(" (",i.getConteoOpcion("categoria",t.valor),") ")}}function ci(o,e){if(o&1){let t=h();n(0,"button",13),_("click",function(){m(t);let a=l(2);return p(a.toggleMasCategorias())}),d(1),r()}if(o&2){let t=l(2);s(),C(" ",t.mostrarMasCategorias()?"Ver menos":"Ver m\xE1s"," ")}}function di(o,e){if(o&1&&(n(0,"div",12),B(1,li,6,3,"label",21,qe),f(3,ci,2,1,"button",4),r()),o&2){let t=l();s(),E(t.categoriasVisibles()),s(2),u(t.tieneCategoriasExtras()?3:-1)}}function ui(o,e){if(o&1){let t=h();n(0,"label",21)(1,"input",22),_("change",function(a){let c=m(t).$implicit,P=l(2);return p(P.onSeleccionarMarca(c.valor,a))}),r(),n(2,"span",23),d(3),r(),n(4,"span",24),d(5),r()()}if(o&2){let t=e.$implicit,i=l(2);s(),y("checked",i.estaActivo("marca",t.valor)),s(2),C(" ",t.etiqueta," "),s(2),C(" (",i.getConteoOpcion("marca",t.valor),") ")}}function mi(o,e){if(o&1){let t=h();n(0,"button",13),_("click",function(){m(t);let a=l(2);return p(a.toggleMasMarcas())}),d(1),r()}if(o&2){let t=l(2);s(),C(" ",t.mostrarMasMarcas()?"Ver menos":"Ver m\xE1s"," ")}}function pi(o,e){if(o&1&&(n(0,"div",12),B(1,ui,6,3,"label",21,qe),f(3,mi,2,1,"button",4),r()),o&2){let t=l();s(),E(t.marcasVisibles()),s(2),u(t.tieneMarcasExtras()?3:-1)}}function _i(o,e){if(o&1){let t=h();n(0,"label",21)(1,"input",22),_("change",function(a){let c=m(t).$implicit,P=l(2).$implicit,q=l();return p(q.onSeleccionarAtributo(P.campo,c.valor,c.etiqueta,a))}),r(),n(2,"span",23),d(3),r(),n(4,"span",24),d(5),r()()}if(o&2){let t=e.$implicit,i=l(2).$implicit,a=l();s(),y("checked",a.estaActivo(i.campo,t.valor)),s(2),C(" ",t.etiqueta," "),s(2),C(" (",t.conteo||0,") ")}}function gi(o,e){if(o&1&&(n(0,"div",12),B(1,_i,6,3,"label",21,qe),r()),o&2){let t=l().$implicit;s(),E(t.opciones)}}function fi(o,e){if(o&1){let t=h();n(0,"div",6)(1,"button",7),_("click",function(){let a=m(t).$implicit,c=l();return p(c.toggleSeccion(a.campo))}),n(2,"span",8),d(3),r(),b(),n(4,"svg",9),g(5,"path",10),r()(),f(6,gi,3,0,"div",12),r()}if(o&2){let t=e.$implicit,i=l();s(3),S(t.label),s(),I("rotate-180",i.estaExpandida(t.campo)),s(2),u(i.estaExpandida(t.campo)&&t.opciones?6:-1)}}var ge=class o{constructor(e){this.fb=e;this.rangoPrecioForm=this.fb.group({min:[null],max:[null]})}filtrosDisponibles=[];filtrosActivos=[];aplicarFiltro=new T;removerFiltro=new T;limpiarFiltros=new T;seccionesExpandidas=x(new Set(["precio","categoria"]));mostrarMasMarcas=x(!1);mostrarMasCategorias=x(!1);rangoPrecioForm;categoriasVisibles=v(()=>{let e=this.filtrosDisponibles.find(i=>i.campo==="categoria");if(!e||!e.opciones)return[];let t=this.mostrarMasCategorias()?e.opciones.length:5;return e.opciones.slice(0,t)});marcasVisibles=v(()=>{let e=this.filtrosDisponibles.find(i=>i.campo==="marca");if(!e||!e.opciones)return[];let t=this.mostrarMasMarcas()?e.opciones.length:5;return e.opciones.slice(0,t)});tieneCategoriasExtras=v(()=>{let e=this.filtrosDisponibles.find(t=>t.campo==="categoria");return e?.opciones&&e.opciones.length>5});tieneMarcasExtras=v(()=>{let e=this.filtrosDisponibles.find(t=>t.campo==="marca");return e?.opciones&&e.opciones.length>5});ngOnInit(){this.inicializarFiltros()}inicializarFiltros(){this.filtrosActivos.forEach(e=>{if(e.campo==="precio"&&e.valor&&typeof e.valor=="object"){let t=e.valor;this.rangoPrecioForm.patchValue({min:t.min,max:t.max})}})}estaExpandida(e){return this.seccionesExpandidas().has(e)}toggleSeccion(e){this.seccionesExpandidas.update(t=>{let i=new Set(t);return i.has(e)?i.delete(e):i.add(e),i})}estaActivo(e,t){return t?this.filtrosActivos.some(i=>i.campo===e&&i.valor===t):this.filtrosActivos.some(i=>i.campo===e)}getConteoOpcion(e,t){let i=this.filtrosDisponibles.find(c=>c.campo===e);return i?.opciones&&i.opciones.find(c=>c.valor===t)?.conteo||0}onSeleccionarCategoria(e,t){if(t.target.checked){let a=this.categoriasVisibles().find(c=>c.valor===e);a&&this.aplicarFiltro.emit({tipo:"categoria",campo:"categoria",valor:e,label:a.etiqueta,activo:!0})}else this.removerFiltro.emit("categoria")}onSeleccionarMarca(e,t){if(t.target.checked){let a=this.marcasVisibles().find(c=>c.valor===e);a&&this.aplicarFiltro.emit({tipo:"marca",campo:"marca",valor:e,label:a.etiqueta,activo:!0})}else this.removerFiltro.emit("marca")}aplicarRangoPrecio(){let e=this.rangoPrecioForm.value;if(e.min!==null||e.max!==null){let t=e.min?parseFloat(e.min):void 0,i=e.max?parseFloat(e.max):void 0;if(t&&i&&t>=i)return;let a={min:t,max:i},c=this.generarLabelPrecio(t,i);this.aplicarFiltro.emit({tipo:"precio",campo:"precio",valor:a,label:c,activo:!0})}}limpiarPrecio(){this.rangoPrecioForm.reset(),this.removerFiltro.emit("precio")}generarLabelPrecio(e,t){let i=a=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(a);return e&&t?`${i(e)} - ${i(t)}`:e?`Desde ${i(e)}`:t?`Hasta ${i(t)}`:"Rango de precio"}onSeleccionarAtributo(e,t,i,a){a.target.checked?this.aplicarFiltro.emit({tipo:e,campo:e,valor:t,label:i,activo:!0}):this.removerFiltro.emit(e)}get filtrosAtributos(){return this.filtrosDisponibles.filter(e=>!["categoria","marca","precio"].includes(e.campo))}toggleMasCategorias(){this.mostrarMasCategorias.update(e=>!e)}toggleMasMarcas(){this.mostrarMasMarcas.update(e=>!e)}onLimpiarTodos(){this.rangoPrecioForm.reset(),this.limpiarFiltros.emit()}get totalFiltrosActivos(){return this.filtrosActivos.length}static \u0275fac=function(t){return new(t||o)(Pe(j))};static \u0275cmp=z({type:o,selectors:[["app-filtros-laterales"]],inputs:{filtrosDisponibles:"filtrosDisponibles",filtrosActivos:"filtrosActivos"},outputs:{aplicarFiltro:"aplicarFiltro",removerFiltro:"removerFiltro",limpiarFiltros:"limpiarFiltros"},standalone:!0,features:[$],decls:30,vars:10,consts:[[1,"bg-white","rounded-lg","border","border-gray-200","sticky","top-6"],[1,"p-4","border-b","border-gray-200"],[1,"flex","items-center","justify-between"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-sm","text-blue-600","hover:text-blue-800"],[1,"divide-y","divide-gray-200"],[1,"p-4"],[1,"flex","items-center","justify-between","w-full","text-left",3,"click"],[1,"text-sm","font-medium","text-gray-900"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","transform","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],[1,"mt-3","space-y-3"],[1,"mt-3","space-y-2"],[1,"text-sm","text-blue-600","hover:text-blue-800",3,"click"],[1,"space-y-3",3,"formGroup"],[1,"grid","grid-cols-2","gap-2"],["type","number","formControlName","min","placeholder","M\xEDn",1,"px-3","py-2","text-sm","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500"],["type","number","formControlName","max","placeholder","M\xE1x",1,"px-3","py-2","text-sm","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500"],[1,"flex","gap-2"],["type","button",1,"flex-1","px-3","py-2","text-sm","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700",3,"click"],["type","button",1,"px-3","py-2","text-sm","text-gray-600","border","border-gray-300","rounded-lg","hover:bg-gray-50",3,"click"],[1,"flex","items-center"],["type","checkbox",1,"rounded","border-gray-300","text-blue-600","focus:ring-blue-500",3,"change","checked"],[1,"ml-2","text-sm","text-gray-700","flex-1"],[1,"text-xs","text-gray-500"]],template:function(t,i){t&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),d(4,"Filtros"),r(),f(5,ri,2,1,"button",4),r()(),n(6,"div",5)(7,"div",6)(8,"button",7),_("click",function(){return i.toggleSeccion("precio")}),n(9,"span",8),d(10,"Precio"),r(),b(),n(11,"svg",9),g(12,"path",10),r()(),f(13,si,10,1,"div",11),r(),A(),n(14,"div",6)(15,"button",7),_("click",function(){return i.toggleSeccion("categoria")}),n(16,"span",8),d(17,"Categor\xEDas"),r(),b(),n(18,"svg",9),g(19,"path",10),r()(),f(20,di,4,1,"div",12),r(),A(),n(21,"div",6)(22,"button",7),_("click",function(){return i.toggleSeccion("marca")}),n(23,"span",8),d(24,"Marcas"),r(),b(),n(25,"svg",9),g(26,"path",10),r()(),f(27,pi,4,1,"div",12),r(),B(28,fi,7,4,"div",6,ni),r()()),t&2&&(s(5),u(i.totalFiltrosActivos>0?5:-1),s(6),I("rotate-180",i.estaExpandida("precio")),s(2),u(i.estaExpandida("precio")?13:-1),s(5),I("rotate-180",i.estaExpandida("categoria")),s(2),u(i.estaExpandida("categoria")?20:-1),s(5),I("rotate-180",i.estaExpandida("marca")),s(2),u(i.estaExpandida("marca")?27:-1),s(),E(i.filtrosAtributos))},dependencies:[L,Ge,re,oe,se,ae,ne,U,le,ce],styles:[".filter-section[_ngcontent-%COMP%]{transition:all .3s ease}.filter-header[_ngcontent-%COMP%]{transition:background-color .2s ease}.filter-header[_ngcontent-%COMP%]:hover{background-color:#f9fafb}.chevron[_ngcontent-%COMP%]{transition:transform .2s ease}input[type=checkbox][_ngcontent-%COMP%]{transition:all .2s ease}input[type=checkbox][_ngcontent-%COMP%]:checked{background-color:#2563eb;border-color:#2563eb}input[type=number][_ngcontent-%COMP%]{transition:all .2s ease}input[type=number][_ngcontent-%COMP%]:focus{box-shadow:0 0 0 2px #3b82f633}.filter-button[_ngcontent-%COMP%]{transition:all .2s ease}.filter-button[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 2px 8px #0000001a}.product-count[_ngcontent-%COMP%]{font-size:.75rem;color:#6b7280}.filter-active[_ngcontent-%COMP%]{background-color:#eff6ff;border-color:#3b82f6}@media (max-width: 1024px){.sticky-filters[_ngcontent-%COMP%]{position:static}}@media (prefers-reduced-motion: reduce){.chevron[_ngcontent-%COMP%], .filter-section[_ngcontent-%COMP%], .filter-header[_ngcontent-%COMP%], input[type=checkbox][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], .filter-button[_ngcontent-%COMP%]{transition:none}}button[_ngcontent-%COMP%]:focus-visible{outline:2px solid #3b82f6;outline-offset:2px}"]})};var xi=(o,e)=>e.termino,vi=(o,e)=>e.value,bi=(o,e)=>e.campo;function hi(o,e){if(o&1){let t=h();n(0,"button",16),_("click",function(){let a=m(t).$implicit,c=l(2);return p(c.onBuscar({q:a.termino}))}),d(1),r()}if(o&2){let t=e.$implicit;s(),C(" ",t.termino," ")}}function Ci(o,e){if(o&1&&(n(0,"div",5)(1,"div",8)(2,"div",9),b(),n(3,"svg",10),g(4,"path",11),r(),A(),n(5,"div",12)(6,"h3",13),d(7," \xBFQuiz\xE1s quisiste decir? "),r(),n(8,"div",14),B(9,hi,2,1,"button",15,xi),r()()()()()),o&2){let t=l();s(9),E(t.sugerencias())}}function yi(o,e){o&1&&(n(0,"div",25),g(1,"div",45),n(2,"span",26),d(3,"Buscando..."),r()())}function qi(o,e){if(o&1&&(d(0," para "),n(1,"span",46),d(2),r()),o&2){let t=l(3);s(2),C('"',t.termino(),'"')}}function wi(o,e){if(o&1&&(n(0,"p",26)(1,"span",46),d(2),r(),d(3),f(4,qi,3,1,"span",46),r()),o&2){let t=l(2);s(2),S(t.totalResultados()),s(),C(" ",t.totalResultados()===1?"resultado":"resultados"," "),s(),u(t.termino()?4:-1)}}function Si(o,e){if(o&1&&(n(0,"span",30),d(1),r()),o&2){let t=l(2);s(),C(" ",t.filtrosActivos().length," ")}}function Bi(o,e){if(o&1&&(n(0,"option",38),d(1),r()),o&2){let t=e.$implicit;y("value",t.value),s(),S(t.label)}}function Ei(o,e){if(o&1){let t=h();n(0,"div",49)(1,"span"),d(2),r(),n(3,"button",51),_("click",function(){let a=m(t).$implicit,c=l(3);return p(c.onRemoverFiltro(a.campo))}),b(),n(4,"svg",52),g(5,"path",53),r()()()}if(o&2){let t=e.$implicit;s(2),S(t.label)}}function Pi(o,e){if(o&1){let t=h();n(0,"div",39)(1,"div",47)(2,"span",48),d(3,"Filtros activos:"),r(),B(4,Ei,6,1,"div",49,bi),n(6,"button",50),_("click",function(){m(t);let a=l(2);return p(a.onLimpiarFiltros())}),d(7," Limpiar todos "),r()()()}if(o&2){let t=l(2);s(4),E(t.filtrosActivos())}}function Ai(o,e){o&1&&(n(0,"div",41),g(1,"div",54),n(2,"span",55),d(3,"Buscando productos..."),r()())}function Mi(o,e){if(o&1){let t=h();n(0,"div",42)(1,"div",56),b(),n(2,"svg",57),g(3,"path",58),r()(),A(),n(4,"h3",59),d(5," Error en la b\xFAsqueda "),r(),n(6,"p",60),d(7),r(),n(8,"button",61),_("click",function(){m(t);let a=l(2);return p(a.realizarBusqueda())}),d(9," Intentar de nuevo "),r()()}if(o&2){let t=l(2);s(7),S(t.error())}}function Fi(o,e){if(o&1){let t=h();n(0,"app-resultados-busqueda",62),_("seleccionarProducto",function(a){m(t);let c=l(2);return p(c.onSeleccionarProducto(a))})("cargarMas",function(){m(t);let a=l(2);return p(a.cargarMasResultados())}),r()}if(o&2){let t=l(2);y("productos",t.productos())("vista",t.vistaActual())("cargandoMas",t.cargandoMas())}}function Oi(o,e){if(o&1&&(n(0,"div",42)(1,"div",63),b(),n(2,"svg",57),g(3,"path",64),r()(),A(),n(4,"h3",59),d(5," No se encontraron resultados "),r(),n(6,"p",65),d(7,' Tu b\xFAsqueda "'),n(8,"span",66),d(9),r(),d(10,'" no arroj\xF3 ning\xFAn resultado. '),r(),n(11,"div",67)(12,"p"),d(13,"Sugerencias:"),r(),n(14,"ul",68)(15,"li"),d(16,"Revisa la ortograf\xEDa de las palabras"),r(),n(17,"li"),d(18,"Utiliza t\xE9rminos m\xE1s generales"),r(),n(19,"li"),d(20,"Prueba con sin\xF3nimos"),r(),n(21,"li"),d(22,"Reduce el n\xFAmero de filtros aplicados"),r()()()()),o&2){let t=l(2);s(9),S(t.termino())}}function ki(o,e){if(o&1){let t=h();n(0,"div",44)(1,"div",69)(2,"p",26),d(3),r(),n(4,"div",70)(5,"button",71),_("click",function(){m(t);let a=l(2);return p(a.onCambiarPagina(a.paginacion().current_page-1))}),d(6," Anterior "),r(),n(7,"button",71),_("click",function(){m(t);let a=l(2);return p(a.onCambiarPagina(a.paginacion().current_page+1))}),d(8," Siguiente "),r()()()()}if(o&2){let t=l(2);s(3),ke(" Mostrando ",(t.paginacion().current_page-1)*t.paginacion().per_page+1," a ",t.paginacion().current_page*t.paginacion().per_page>t.paginacion().total?t.paginacion().total:t.paginacion().current_page*t.paginacion().per_page," de ",t.paginacion().total," resultados "),s(2),y("disabled",t.paginacion().current_page===1),s(2),y("disabled",t.paginacion().current_page===t.paginacion().last_page)}}function Ti(o,e){if(o&1){let t=h();n(0,"div",6)(1,"div",17)(2,"aside",18)(3,"div",19)(4,"app-filtros-laterales",20),_("aplicarFiltro",function(a){m(t);let c=l();return p(c.onAplicarFiltro(a))})("removerFiltro",function(a){m(t);let c=l();return p(c.onRemoverFiltro(a))})("limpiarFiltros",function(){m(t);let a=l();return p(a.onLimpiarFiltros())}),r()()(),n(5,"main",21)(6,"div",2)(7,"div",22)(8,"div",23)(9,"div",24),f(10,yi,4,0,"div",25)(11,wi,5,3,"p",26),n(12,"button",27),_("click",function(){m(t);let a=l();return p(a.toggleFiltrosMovil())}),b(),n(13,"svg",28),g(14,"path",29),r(),d(15," Filtros "),f(16,Si,2,1,"span",30),r()(),A(),n(17,"div",31)(18,"div",32)(19,"button",33),_("click",function(){m(t);let a=l();return p(a.vistaActual.set("grid"))}),b(),n(20,"svg",34),g(21,"path",35),r()(),A(),n(22,"button",33),_("click",function(){m(t);let a=l();return p(a.vistaActual.set("lista"))}),b(),n(23,"svg",34),g(24,"path",36),r()()(),A(),n(25,"select",37),_("change",function(a){m(t);let c=l();return p(c.onCambiarOrdenamiento(a.target.value))}),B(26,Bi,2,2,"option",38,vi),r()()(),f(28,Pi,8,0,"div",39),r(),n(29,"div",40),f(30,Ai,4,0,"div",41)(31,Mi,10,1,"div",42)(32,Fi,1,3,"app-resultados-busqueda",43)(33,Oi,23,1,"div",42),r()(),f(34,ki,9,5,"div",44),r()()()}if(o&2){let t=l();s(4),y("filtrosDisponibles",t.filtrosDisponibles())("filtrosActivos",t.filtrosActivos()),s(6),u(t.cargando()?10:t.hayResultados()?11:-1),s(6),u(t.filtrosActivos().length>0?16:-1),s(3),D(t.vistaActual()==="grid"?"bg-white shadow-sm text-gray-900":"text-gray-600 hover:text-gray-900"),s(3),D(t.vistaActual()==="lista"?"bg-white shadow-sm text-gray-900":"text-gray-600 hover:text-gray-900"),s(3),y("value",t.ordenamiento()),s(),E(t.opcionesOrdenamiento()),s(2),u(t.filtrosActivos().length>0?28:-1),s(2),u(t.cargando()?30:t.error()?31:t.hayResultados()?32:t.termino()?33:-1),s(4),u(t.hayResultados()&&t.paginacion()?34:-1)}}function Ri(o,e){if(o&1){let t=h();n(0,"div",7)(1,"div",72),_("click",function(){m(t);let a=l();return p(a.toggleFiltrosMovil())}),r(),n(2,"div",73)(3,"div",74)(4,"div",75)(5,"h2",76),d(6,"Filtros"),r(),n(7,"button",77),_("click",function(){m(t);let a=l();return p(a.toggleFiltrosMovil())}),b(),n(8,"svg",78),g(9,"path",53),r()()(),A(),n(10,"div",79)(11,"app-filtros-laterales",20),_("aplicarFiltro",function(a){m(t);let c=l();return p(c.onAplicarFiltro(a))})("removerFiltro",function(a){m(t);let c=l();return p(c.onRemoverFiltro(a))})("limpiarFiltros",function(){m(t);let a=l();return p(a.onLimpiarFiltros())}),r()(),n(12,"div",80)(13,"div",81)(14,"button",82),_("click",function(){m(t);let a=l();return p(a.onLimpiarFiltros())}),d(15," Limpiar "),r(),n(16,"button",83),_("click",function(){m(t);let a=l();return p(a.toggleFiltrosMovil())}),d(17," Aplicar "),r()()()()()()}if(o&2){let t=l();s(11),y("filtrosDisponibles",t.filtrosDisponibles())("filtrosActivos",t.filtrosActivos())}}var Ye=class o{router=F(ie);route=F(ze);fb=F(j);busquedaService=F(Y);categoriasService=F($e);destroy$=new Q;termino=x("");categoriaSeleccionada=x(null);ordenamiento=x("relevancia");paginaActual=x(1);mostrarFiltrosMovil=x(!1);vistaActual=x("grid");cargandoMas=x(!1);hayResultados=v(()=>this.busquedaService.tieneResultados());productos=v(()=>this.busquedaService.productos());totalResultados=v(()=>this.busquedaService.totalResultados());paginacion=v(()=>this.busquedaService.paginacion());cargando=v(()=>this.busquedaService.cargando());error=v(()=>this.busquedaService.error());filtrosActivos=v(()=>this.busquedaService.filtrosActivos());sugerencias=v(()=>this.busquedaService.sugerencias());terminosPopulares=v(()=>this.busquedaService.terminosPopulares());filtrosDisponibles=v(()=>this.busquedaService.filtrosDisponibles());categorias=x([]);opcionesOrdenamiento=x([{value:"relevancia",label:"M\xE1s relevantes"},{value:"precio_asc",label:"Precio: menor a mayor"},{value:"precio_desc",label:"Precio: mayor a menor"},{value:"nombre",label:"Nombre A-Z"},{value:"calificacion",label:"Mejor valorados"},{value:"popularidad",label:"M\xE1s populares"},{value:"fecha",label:"M\xE1s recientes"}]);busquedaForm=this.fb.group({termino:[""],categoria:[null],precio_min:[null],precio_max:[null],ordenamiento:["relevancia"],pagina:[1]});breadcrumbItems=v(()=>{let e=[{label:"Inicio",url:"/"},{label:"B\xFAsqueda",url:"/buscar"}],t=this.termino();return t&&e.push({label:`Resultados para "${t}"`,url:""}),e});constructor(){Z(()=>{this.route.queryParams.pipe(W(this.destroy$)).subscribe(e=>{this.actualizarDesdeQueryParams(e)})}),Z(()=>{let e=this.busquedaForm.value;e.termino&&e.termino.length>=2&&this.realizarBusqueda()})}ngOnInit(){this.inicializarComponente()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}inicializarComponente(){return ee(this,null,function*(){try{yield this.cargarCategorias(),yield this.cargarTerminosPopulares();let e=this.route.snapshot.queryParams;Object.keys(e).length>0&&this.actualizarDesdeQueryParams(e)}catch(e){console.error("Error al inicializar componente de b\xFAsqueda:",e)}})}cargarCategorias(){return ee(this,null,function*(){try{this.categoriasService.getCategorias().subscribe({next:e=>{e.data&&this.categorias.set(e.data)},error:e=>console.error("Error al cargar categor\xEDas:",e)})}catch(e){console.error("Error al cargar categor\xEDas:",e)}})}cargarTerminosPopulares(){return ee(this,null,function*(){try{this.busquedaService.obtenerTerminosPopulares().subscribe({next:e=>{e.success&&e.data&&console.log("T\xE9rminos populares cargados:",e.data)},error:e=>console.error("Error al cargar t\xE9rminos populares:",e)})}catch(e){console.error("Error al cargar t\xE9rminos populares:",e)}})}actualizarDesdeQueryParams(e){let t={};if(e.q&&(t.termino=e.q,this.termino.set(e.q)),e.categoria){let i=parseInt(e.categoria);t.categoria=i,this.categoriaSeleccionada.set(i)}if(e.precio_min&&(t.precio_min=parseFloat(e.precio_min)),e.precio_max&&(t.precio_max=parseFloat(e.precio_max)),e.orden&&(t.ordenamiento=e.orden,this.ordenamiento.set(e.orden)),e.pagina){let i=parseInt(e.pagina);t.pagina=i,this.paginaActual.set(i)}this.busquedaForm.patchValue(t)}realizarBusqueda(){let e=this.busquedaForm.value,t={q:e.termino||"",categoria:e.categoria||void 0,precio_min:e.precio_min||void 0,precio_max:e.precio_max||void 0,ordenar_por:e.ordenamiento||"relevancia",page:e.pagina||1,per_page:20};this.busquedaService.buscar(t).subscribe({next:i=>{i.success&&this.actualizarURL()},error:i=>{console.error("Error en b\xFAsqueda:",i)}})}actualizarURL(){let e=this.busquedaForm.value,t={};e.termino&&(t.q=e.termino),e.categoria&&(t.categoria=e.categoria),e.precio_min&&(t.precio_min=e.precio_min),e.precio_max&&(t.precio_max=e.precio_max),e.ordenamiento&&e.ordenamiento!=="relevancia"&&(t.orden=e.ordenamiento),e.pagina&&e.pagina>1&&(t.pagina=e.pagina),this.router.navigate([],{relativeTo:this.route,queryParams:t,queryParamsHandling:"merge"})}onBuscar(e){this.busquedaForm.patchValue({termino:e.q,categoria:e.categoria||null,precio_min:e.precio_min||null,precio_max:e.precio_max||null,ordenamiento:e.ordenar_por||"relevancia",pagina:1}),this.termino.set(e.q),this.paginaActual.set(1)}onCambiarOrdenamiento(e){this.busquedaForm.patchValue({ordenamiento:e,pagina:1}),this.ordenamiento.set(e),this.paginaActual.set(1)}onCambiarPagina(e){this.busquedaForm.patchValue({pagina:e}),this.paginaActual.set(e),window.scrollTo({top:0,behavior:"smooth"})}onAplicarFiltro(e){this.busquedaService.aplicarFiltro(e),this.realizarBusquedaAvanzada()}onRemoverFiltro(e){this.busquedaService.removerFiltro(e),this.realizarBusquedaAvanzada()}onLimpiarFiltros(){this.busquedaService.limpiarFiltros(),this.busquedaForm.patchValue({categoria:null,precio_min:null,precio_max:null,pagina:1}),this.paginaActual.set(1),this.realizarBusqueda()}realizarBusquedaAvanzada(){let e=this.busquedaForm.value,t=this.filtrosActivos(),i=O({termino:e.termino||void 0,categorias:e.categoria?[e.categoria]:void 0,precio_min:e.precio_min||void 0,precio_max:e.precio_max||void 0,ordenar_por:e.ordenamiento||"relevancia",page:e.pagina||1,per_page:20},t.length>0&&this.convertirFiltrosARequest(t));this.busquedaService.busquedaAvanzada(i).subscribe({next:a=>{a.success&&this.actualizarURL()},error:a=>{console.error("Error en b\xFAsqueda avanzada:",a)}})}convertirFiltrosARequest(e){let t={};return e.forEach(i=>{switch(i.tipo){case"marca":t.marcas||(t.marcas=[]),t.marcas.push(i.valor);break;case"descuento":t.con_descuento=i.valor;break;case"stock":t.en_stock=i.valor;break;case"calificacion":t.calificacion_min=i.valor;break}}),t}toggleVista(){let e=this.vistaActual()==="grid"?"lista":"grid";this.vistaActual.set(e)}toggleFiltrosMovil(){this.mostrarFiltrosMovil.update(e=>!e)}onProductoSeleccionadoAutocompletado(e){console.log("\u{1F50D} [BUSQUEDA-PARENT] Producto seleccionado:",e.nombre,"ID:",e.id),console.log("\u{1F680} [BUSQUEDA-PARENT] Navegando con ID:",e.id),this.router.navigate(["/producto",e.id.toString()]).then(t=>{console.log("\u2705 [BUSQUEDA-PARENT] Navegaci\xF3n exitosa:",t)},t=>{console.error("\u274C [BUSQUEDA-PARENT] Error en navegaci\xF3n:",t)})}onSeleccionarProducto(e){let t=this.generarSlug(e.nombre,e.id);this.router.navigate(["/producto",t])}generarSlug(e,t){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-").replace(/-+/g,"-").concat(`-${t}`)}cargarMasResultados(){let e=this.paginacion();if(!e||e.current_page>=e.last_page)return;this.cargandoMas.set(!0);let t=e.current_page+1;this.onCambiarPagina(t),setTimeout(()=>{this.cargandoMas.set(!1)},1e3)}get TipoOrdenamiento(){return{RELEVANCIA:"relevancia",PRECIO_ASC:"precio_asc",PRECIO_DESC:"precio_desc",NOMBRE:"nombre",CALIFICACION:"calificacion",POPULARIDAD:"popularidad",FECHA:"fecha"}}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=z({type:o,selectors:[["app-busqueda"]],standalone:!0,features:[$],decls:8,vars:6,consts:[[1,"bg-gray-50"],[1,"w-full"],[1,"bg-white","shadow-sm","border","border-gray-200","mb-6"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8","py-6"],[1,"block","w-full",3,"buscar","productoSeleccionado","categorias","terminoInicial","categoriaInicial"],[1,"bg-blue-50","border","border-blue-200","mb-6"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"fixed","inset-0","z-50","lg:hidden"],[1,"p-4"],[1,"flex","items-start","gap-3"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5","text-blue-600","mt-0.5","flex-shrink-0"],["fill-rule","evenodd","d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule","evenodd"],[1,"flex-1"],[1,"text-sm","font-medium","text-blue-900","mb-2"],[1,"flex","flex-wrap","gap-2"],[1,"text-sm","text-blue-700","hover:text-blue-900","underline"],[1,"text-sm","text-blue-700","hover:text-blue-900","underline",3,"click"],[1,"flex","gap-6"],[1,"hidden","lg:block","w-80","flex-shrink-0"],[1,"sticky","top-6"],[3,"aplicarFiltro","removerFiltro","limpiarFiltros","filtrosDisponibles","filtrosActivos"],[1,"flex-1","min-w-0"],[1,"p-4","border-b","border-gray-200"],[1,"flex","items-center","justify-between","flex-wrap","gap-4"],[1,"flex","items-center","gap-4"],[1,"flex","items-center","gap-2"],[1,"text-sm","text-gray-600"],[1,"lg:hidden","flex","items-center","gap-2","px-3","py-2","text-sm","bg-gray-100","text-gray-700","hover:bg-gray-200","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"],[1,"bg-blue-100","text-blue-800","text-xs","px-2","py-0.5","rounded-full"],[1,"flex","items-center","gap-3"],[1,"hidden","sm:flex","bg-gray-100","p-1"],[1,"p-2","rounded-md","transition-all","duration-200",3,"click"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4"],["d","M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"],["fill-rule","evenodd","d","M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule","evenodd"],[1,"px-3","py-2","text-sm","border","border-gray-300","focus:ring-2","focus:ring-blue-500","focus:border-blue-500",3,"change","value"],[3,"value"],[1,"mt-4","pt-4","border-t","border-gray-200"],[1,"p-6"],[1,"flex","items-center","justify-center","py-12"],[1,"text-center","py-12"],[3,"productos","vista","cargandoMas"],[1,"bg-white","shadow-sm","border","border-gray-200"],[1,"animate-spin","rounded-full","h-4","w-4","border-b-2","border-blue-600"],[1,"font-medium","text-gray-900"],[1,"flex","items-center","gap-2","flex-wrap"],[1,"text-sm","font-medium","text-gray-700"],[1,"flex","items-center","gap-1","bg-blue-100","text-blue-800","px-3","py-1","rounded-full","text-sm"],[1,"text-sm","text-gray-500","hover:text-gray-700","underline",3,"click"],[1,"ml-1","hover:bg-blue-200","rounded-full","p-0.5",3,"click"],["fill","currentColor","viewBox","0 0 20 20",1,"w-3","h-3"],["fill-rule","evenodd","d","M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule","evenodd"],[1,"animate-spin","rounded-full","h-8","w-8","border-b-2","border-blue-600"],[1,"ml-3","text-gray-600"],[1,"text-red-600","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-16","h-16","mx-auto"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-gray-600","mb-4"],[1,"px-4","py-2","bg-blue-600","text-white","hover:bg-blue-700","transition-colors","duration-200",3,"click"],[3,"seleccionarProducto","cargarMas","productos","vista","cargandoMas"],[1,"text-gray-400","mb-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],[1,"text-gray-600","mb-6"],[1,"font-medium"],[1,"space-y-2","text-sm","text-gray-600"],[1,"list-disc","list-inside","space-y-1"],[1,"p-4","flex","items-center","justify-between"],[1,"flex","gap-2"],[1,"px-3","py-2","text-sm","border","disabled:opacity-50","disabled:cursor-not-allowed","hover:bg-gray-50",3,"click","disabled"],[1,"fixed","inset-0","bg-black","bg-opacity-50",3,"click"],[1,"fixed","inset-y-0","left-0","w-80","max-w-full","bg-white","shadow-xl"],[1,"h-full","flex","flex-col"],[1,"flex","items-center","justify-between","p-4","border-b","border-gray-200"],[1,"text-lg","font-semibold","text-gray-900"],[1,"p-2","text-gray-400","hover:text-gray-600",3,"click"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5"],[1,"flex-1","overflow-y-auto"],[1,"p-4","border-t","border-gray-200"],[1,"flex","gap-3"],[1,"flex-1","px-4","py-2","text-gray-700","bg-gray-100","hover:bg-gray-200","transition-colors","duration-200",3,"click"],[1,"flex-1","px-4","py-2","bg-blue-600","text-white","hover:bg-blue-700","transition-colors","duration-200",3,"click"]],template:function(t,i){t&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"app-barra-busqueda-avanzada",4),_("buscar",function(c){return i.onBuscar(c)})("productoSeleccionado",function(c){return i.onProductoSeleccionadoAutocompletado(c)}),r()()(),f(5,Ci,11,0,"div",5)(6,Ti,35,12,"div",6),r()(),f(7,Ri,18,2,"div",7)),t&2&&(s(4),y("categorias",i.categorias())("terminoInicial",i.termino())("categoriaInicial",i.categoriaSeleccionada()),s(),u(i.sugerencias().length>0?5:-1),s(),u(i.termino()?6:-1),s(),u(i.mostrarFiltrosMovil()?7:-1))},dependencies:[L,U,de,ue,pe,_e,ge],styles:["@keyframes _ngcontent-%COMP%_slideInFromLeft{0%{transform:translate(-100%);opacity:0}to{transform:translate(0);opacity:1}}@keyframes _ngcontent-%COMP%_slideInFromRight{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes _ngcontent-%COMP%_scaleIn{0%{transform:scale(.95);opacity:0}to{transform:scale(1);opacity:1}}.animate-slide-in-left[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInFromLeft .3s ease-out}.animate-slide-in-right[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInFromRight .3s ease-out}.animate-fade-in-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .3s ease-out}.animate-scale-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_scaleIn .2s ease-out}.busqueda-container[_ngcontent-%COMP%]{min-height:calc(100vh - 200px)}.producto-card[_ngcontent-%COMP%]{transition:all .3s ease;transform-origin:center}.producto-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 10px 25px -5px #0000001a,0 10px 10px -5px #0000000a}.filtro-activo[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#1d4ed8);border:1px solid #2563eb;transition:all .2s ease}.filtro-activo[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#2563eb,#1e40af);transform:scale(1.02)}.filtros-modal[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.filtros-panel[_ngcontent-%COMP%]{box-shadow:0 25px 50px -12px #00000040}.vista-toggle[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;padding:4px}.vista-toggle[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:6px;transition:all .2s ease}.vista-toggle[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#fff;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f}.paginacion-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;border:1px solid #e5e7eb;box-shadow:0 1px 3px #0000001a}.loading-shimmer[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:-200% 0}to{background-position:200% 0}}.estado-vacio[_ngcontent-%COMP%]{background:radial-gradient(circle at center,#f8fafc,#f1f5f9);border:2px dashed #cbd5e1;border-radius:12px}.sugerencias-container[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dbeafe,#bfdbfe);border:1px solid #93c5fd;border-radius:8px}.sugerencia-item[_ngcontent-%COMP%]{transition:all .2s ease}.sugerencia-item[_ngcontent-%COMP%]:hover{background:#3b82f61a;transform:translate(2px)}@media (max-width: 768px){.busqueda-container[_ngcontent-%COMP%]{padding:1rem}.filtros-panel[_ngcontent-%COMP%]{width:100%;max-width:320px}}.focus-visible[_ngcontent-%COMP%]:focus{outline:2px solid #3b82f6;outline-offset:2px}html[_ngcontent-%COMP%]{scroll-behavior:smooth}.cargar-mas-indicator[_ngcontent-%COMP%]{background:linear-gradient(90deg,transparent,rgba(59,130,246,.1),transparent);animation:_ngcontent-%COMP%_slide 1.5s infinite}@keyframes _ngcontent-%COMP%_slide{0%{transform:translate(-100%)}to{transform:translate(100%)}}.badge-filtros[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626);color:#fff;font-weight:600;min-width:1.25rem;height:1.25rem;display:flex;align-items:center;justify-content:center;border-radius:9999px;font-size:.75rem;line-height:1}*[_ngcontent-%COMP%]{transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.interactive-element[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #00000026}.no-resultados[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f9fafb,#f3f4f6);border:2px dashed #d1d5db}.sticky-header[_ngcontent-%COMP%]{position:sticky;top:0;z-index:30;background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-bottom:1px solid rgba(229,231,235,.8)}.will-change-transform[_ngcontent-%COMP%]{will-change:transform}.will-change-opacity[_ngcontent-%COMP%]{will-change:opacity}@media (prefers-reduced-motion: reduce){*[_ngcontent-%COMP%], [_ngcontent-%COMP%]:before, [_ngcontent-%COMP%]:after{animation-delay:-1ms!important;animation-duration:1ms!important;animation-iteration-count:1!important;background-attachment:initial!important;scroll-behavior:auto!important;transition-duration:0s!important;transition-delay:0s!important}}"]})};export{Ye as a};
